

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <meta name="google-site-verification" content="elv6HP48K6bVVMeBdbFYkmoi4IBF6JVtH0WaCgUXRNY" />
  <link rel="apple-touch-icon" sizes="76x76" href="/img/rose.png">
  <link rel="icon" href="/img/rose.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Deng Ye">
  <meta name="keywords" content="">
  
    <meta name="description" content="ÂâçË®Ä Êú¨ÁØáÊñáÁ´†‰∏∫Á¨îËÄÖÁöÑËØª‰π¶Á¨îËÆ∞ÔºåÊú™ÁªèÂÖÅËÆ∏ËØ∑ÂãøËΩ¨ËΩΩ„ÄÇÊú¨ÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤Ëø∞C++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜÔºå‰ºöÁî®Âà∞ÈÉ®ÂàÜintelÂºèÂíåATTÂºèÊ±áÁºñÁöÑÁü•ËØÜ„ÄÇÊàë‰ºöÂú®ÊñáÁ´†Êú´Â∞æÁªôÂá∫ÊµãËØï‰ª£Á†ÅÁöÑÂèçÊ±áÁºñ‰ª£Á†Å‰ª•ÂèäÂè≥ÂÄºÂºïÁî®ÔºàRvalue referencesÔºâÂÆòÊñπÊñáÊ°£ :)„ÄÇ   ‰∏â‰∫îÊ≥ïÂàô ‰∏â‰∫îÊ≥ïÂàôÔºöÊúâÊûêÊûÑÂ∞±Â∫îËØ•ÊúâÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåÊã∑Ë¥ùËµãÂÄºËøêÁÆóÊ≥ïÔºà3Ôºâ„ÄÇc++11‰∏ãÔºå‰∏Ä‰∏™Á±ªËøòÂèØ‰ª•ÊúâÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÂíåÁßªÂä®ËµãÂÄº">
<meta property="og:type" content="article">
<meta property="og:title" content="Áî®ÂèçÊ±áÁºñÂàÜÊûêc++RVOÂºÄÂêØÂíåÂÖ≥Èó≠Êó∂ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰ª•ÂèäC++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜ">
<meta property="og:url" content="https://howl144.github.io/2022/01/28/00004.%20%E7%94%A8%E5%8F%8D%E6%B1%87%E7%BC%96%E5%88%86%E6%9E%90c++RVO%E5%BC%80%E5%90%AF%E5%92%8C%E5%85%B3%E9%97%AD%E6%97%B6%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E4%BB%A5%E5%8F%8AC++prvalue%EF%BC%8Cxvalue%E5%92%8Clvalue%E7%9A%84%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/index.html">
<meta property="og:site_name" content="ü•∞Howl&#39;s Blog">
<meta property="og:description" content="ÂâçË®Ä Êú¨ÁØáÊñáÁ´†‰∏∫Á¨îËÄÖÁöÑËØª‰π¶Á¨îËÆ∞ÔºåÊú™ÁªèÂÖÅËÆ∏ËØ∑ÂãøËΩ¨ËΩΩ„ÄÇÊú¨ÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤Ëø∞C++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜÔºå‰ºöÁî®Âà∞ÈÉ®ÂàÜintelÂºèÂíåATTÂºèÊ±áÁºñÁöÑÁü•ËØÜ„ÄÇÊàë‰ºöÂú®ÊñáÁ´†Êú´Â∞æÁªôÂá∫ÊµãËØï‰ª£Á†ÅÁöÑÂèçÊ±áÁºñ‰ª£Á†Å‰ª•ÂèäÂè≥ÂÄºÂºïÁî®ÔºàRvalue referencesÔºâÂÆòÊñπÊñáÊ°£ :)„ÄÇ   ‰∏â‰∫îÊ≥ïÂàô ‰∏â‰∫îÊ≥ïÂàôÔºöÊúâÊûêÊûÑÂ∞±Â∫îËØ•ÊúâÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåÊã∑Ë¥ùËµãÂÄºËøêÁÆóÊ≥ïÔºà3Ôºâ„ÄÇc++11‰∏ãÔºå‰∏Ä‰∏™Á±ªËøòÂèØ‰ª•ÊúâÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÂíåÁßªÂä®ËµãÂÄº">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://howl144.github.io/img%5C00004%5Cindex.png">
<meta property="article:published_time" content="2022-01-28T00:51:32.000Z">
<meta property="article:modified_time" content="2023-08-06T10:39:56.900Z">
<meta property="article:author" content="Deng Ye">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://howl144.github.io/img%5C00004%5Cindex.png">
  
  
  
  <title>Áî®ÂèçÊ±áÁºñÂàÜÊûêc++RVOÂºÄÂêØÂíåÂÖ≥Èó≠Êó∂ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰ª•ÂèäC++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜ - ü•∞Howl&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ‰∏ªÈ¢ò‰æùËµñÁöÑÂõæÊ†áÂ∫ìÔºå‰∏çË¶ÅËá™Ë°å‰øÆÊîπ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"howl144.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"MY3hK2j6KKqPNCHItX2Yargj-gzGzoHsz","app_key":"U0dZRBpPFA46kRmFcsltQFF2","server_url":"https://my3hk2j6.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', '');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Howl&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/portfolio/">
                <i class="iconfont icon-pen"></i>
                <span>Portfolio</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Category</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archive</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About Me</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/post.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.5)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Áî®ÂèçÊ±áÁºñÂàÜÊûêc++RVOÂºÄÂêØÂíåÂÖ≥Èó≠Êó∂ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰ª•ÂèäC++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜ"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-01-28 08:51" pubdate>
          January 28, 2022 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          17k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          144 mins
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> views
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Áî®ÂèçÊ±áÁºñÂàÜÊûêc++RVOÂºÄÂêØÂíåÂÖ≥Èó≠Êó∂ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰ª•ÂèäC++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜ</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h1><blockquote>
<p><strong>Êú¨ÁØáÊñáÁ´†‰∏∫Á¨îËÄÖÁöÑËØª‰π¶Á¨îËÆ∞ÔºåÊú™ÁªèÂÖÅËÆ∏ËØ∑ÂãøËΩ¨ËΩΩ„ÄÇ</strong><br>Êú¨ÁØáÊñáÁ´†‰∏ªË¶ÅËÆ≤Ëø∞C++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜÔºå‰ºöÁî®Âà∞ÈÉ®ÂàÜintelÂºèÂíåATTÂºèÊ±áÁºñÁöÑÁü•ËØÜ„ÄÇÊàë‰ºöÂú®ÊñáÁ´†Êú´Â∞æÁªôÂá∫ÊµãËØï‰ª£Á†ÅÁöÑÂèçÊ±áÁºñ‰ª£Á†Å‰ª•ÂèäÂè≥ÂÄºÂºïÁî®ÔºàRvalue referencesÔºâÂÆòÊñπÊñáÊ°£ :)„ÄÇ</p>
</blockquote>
<hr>
<h1 id="‰∏â‰∫îÊ≥ïÂàô"><a href="#‰∏â‰∫îÊ≥ïÂàô" class="headerlink" title="‰∏â‰∫îÊ≥ïÂàô"></a>‰∏â‰∫îÊ≥ïÂàô</h1><blockquote>
<p>‰∏â‰∫îÊ≥ïÂàôÔºöÊúâÊûêÊûÑÂ∞±Â∫îËØ•ÊúâÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞ÂíåÊã∑Ë¥ùËµãÂÄºËøêÁÆóÊ≥ïÔºà3Ôºâ„ÄÇ<br>c++11‰∏ãÔºå‰∏Ä‰∏™Á±ªËøòÂèØ‰ª•ÊúâÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÂíåÁßªÂä®ËµãÂÄºËøêÁÆóÁ¨¶Ôºà3+2Ôºâ„ÄÇ<br>‰∏â‰∫îÊ≥ïÂàôÊó∂ÂÄô‰∏ÄËà¨ÊÉÖÂÜµÔºåÂ¶ÇÊûú‰∏çÊÉ≥Êüê‰∏™ÂáΩÊï∞Ë¢´ÊôÆÈÄöÊàñËÄÖÂèãÂÖÉ‰ΩøÁî®ÂèØ‰ª•Â∞ÜÂÖ∂ÂÆö‰πâ‰∏∫&#x3D;deleteÊàñËÄÖÂú®privateÈáåÈù¢Â£∞Êòé‰ΩÜ‰∏çÂÆö‰πâÔºåÂÖ∑‰ΩìÂèÇËÄÉC++ primer p449„ÄÇ<br>ÁßªÂä®ÂáΩÊï∞ÁöÑÂá∫Áé∞ÊèêÈ´ò‰∫ÜÁ±ªÂÜÖÂ≠òËΩ¨ËÆ©ÁöÑÊïàÁéáÔºåËÄåÊîØÊâøËøô‰∏ÄÊäÄÊúØÁöÑÂü∫Á°ÄÂ∞±ÊòØprvalue,xvalue,lvalue.<br>(xvalueÂíåprvalueÁªüÁß∞‰∏∫rvalueÔºålvalueÂíåxvalueÁªüÁß∞‰∏∫glvalue„ÄÇÂè™ÈúÄË¶ÅËÆ∞‰Ωè‰∏äÈù¢ËØ¥ÁöÑ‰∏âÁßçÂ∞±ÂèØ‰ª•ÔºåËøô‰∏§‰∏™ÁªüÁß∞ÂèØ‰ª•‰∏çÁî®ËÆ∞)„ÄÇ<br>Ëøô‰∏âÁßçÂÄºÁöÑÂá∫Áé∞Âú∫ÂêàÂíåÁâπÁÇπÂú®ÂêéÊñáËØ¶ÁªÜËØ¥Êòé„ÄÇ</p>
</blockquote>
<hr>
<h1 id="Êú™ÂºÄÂêØRVO‰ºòÂåñ‰∏éxvalueÂíåprvalueÁöÑÂÖ≥Á≥ª"><a href="#Êú™ÂºÄÂêØRVO‰ºòÂåñ‰∏éxvalueÂíåprvalueÁöÑÂÖ≥Á≥ª" class="headerlink" title="Êú™ÂºÄÂêØRVO‰ºòÂåñ‰∏éxvalueÂíåprvalueÁöÑÂÖ≥Á≥ª"></a>Êú™ÂºÄÂêØRVO‰ºòÂåñ‰∏éxvalueÂíåprvalueÁöÑÂÖ≥Á≥ª</h1><blockquote>
<p>ÂÖ≥Èó≠RVOÁöÑÊñπÊ≥ï:<br>eg:<code>clang++ -g -fno-elide-constructors /home/dengye/test/test.cpp -o /home/dengye/test/test</code><br>ÂÖàËÆæËÆ°‰∏Ä‰∏™‰∏â‰∫îÊ≥ïÂàôÁöÑÁ±ªÔºåÂÜçÂàÜÊûêÂÖ≥Èó≠ÂíåÂºÄÂêØRVOÊó∂Á®ãÂ∫èÁöÑÂ†ÜÊ†àÂàÜÂ∏ÉÂõæ„ÄÇ<br>Â∫üËØù‰∏çÂ§öËØ¥ÂºÄÊï¥ÔºÅ</p>
</blockquote>
<h2 id="ÊµãËØï‰ª£Á†Å"><a href="#ÊµãËØï‰ª£Á†Å" class="headerlink" title="ÊµãËØï‰ª£Á†Å"></a>ÊµãËØï‰ª£Á†Å</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">B</span>(<span class="hljs-type">int</span> val=<span class="hljs-number">0</span>):<span class="hljs-built_in">bVal</span>(val)&#123;&#125;<br>    <span class="hljs-comment">// B(const B&amp; tmp):bVal(tmp.bVal)&#123;&#125;</span><br>    ~<span class="hljs-built_in">B</span>()&#123;&#125;<br>    <span class="hljs-type">int</span> bVal;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Foo</span>(<span class="hljs-type">int</span> tmp = <span class="hljs-number">0</span>):<span class="hljs-built_in">ptrb</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">B</span>(tmp))<br>    &#123;<br>        std::cout&lt;&lt;<span class="hljs-string">&quot;ÊûÑÈÄ†ÂáΩÊï∞&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>    <span class="hljs-built_in">Foo</span>(<span class="hljs-type">const</span> Foo&amp; src):<span class="hljs-built_in">ptrb</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">B</span>(*(src.ptrb)))<span class="hljs-comment">//‰ºöÁªßÁª≠Ë∞ÉÁî®BÁöÑÊã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞</span><br>    &#123;<br>        std::cout&lt;&lt;<span class="hljs-string">&quot;Êã∑Ë¥ùÊûÑÈÄ†ÂáΩÊï∞&quot;</span>&lt;&lt;std::endl;<br>    &#125;<br>    Foo&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Foo&amp; src)<br>    &#123;<br>        std::cout&lt;&lt;<span class="hljs-string">&quot;Êã∑Ë¥ùËµãÂÄºÂáΩÊï∞&quot;</span>&lt;&lt;std::endl;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == &amp;src)<br>            <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<span class="hljs-comment">//Èò≤Ê≠¢Ëá™Â∑±ÁªôËá™Â∑±ËµãÂÄº„ÄÇ</span><br>        <span class="hljs-keyword">delete</span> ptrb;<span class="hljs-comment">//ÂÖàÊääËá™Â∑±ÁöÑËøôÂùóÂÜÖÂ≠òÂπ≤Êéâ</span><br>        ptrb = <span class="hljs-keyword">new</span> <span class="hljs-built_in">B</span>(*(src.ptrb));<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;    <br>    &#125;<br>    <span class="hljs-built_in">Foo</span>(Foo&amp;&amp; src) <span class="hljs-keyword">noexcept</span> :<span class="hljs-built_in">ptrb</span>(src.ptrb)<span class="hljs-comment">//noexcept:ÈÄöÁü•Ê†áÂáÜÂ∫ìÊàë‰ª¨Ëøô‰∏™ÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞‰∏çÊäõÂá∫‰ªª‰ΩïÂºÇÂ∏∏ÔºàÂ¶ÇÊûúÁºñËØëÂô®Á°ÆËÆ§ÂáΩÊï∞‰∏ç‰ºöÊäõÂá∫ÂºÇÂ∏∏ÔºåÂÆÉÂ∞±ËÉΩÊâßË°åÊüê‰∫õÁâπÊÆäÁöÑ‰ºòÂåñÊìç‰ΩúÔºåËÄåËøô‰∫õÊìç‰Ωú‰∏çÈÄÇÂêàÁî®‰∫éÂèØËÉΩÂá∫ÈîôÁöÑ‰ª£Á†ÅÔºâÔºå‰æãÂ¶ÇÊàë‰ª¨Â∏åÊúõÂú®vectorÈáçÊñ∞ÂàÜÈÖçÂÜÖÂ≠òËøôÁ±ªÊÉÖÂÜµ‰∏ãÂØπÊàë‰ª¨Ëá™ÂÆö‰πâÁ±ªÂûãÁöÑÂØπË±°ËøõË°åÁßªÂä®ËÄå‰∏çÊòØÊã∑Ë¥ùÔºåÂ∞±ÂøÖÈ°ªÊòæÂºèÂú∞ÂëäËØâÊ†áÂáÜÂ∫ìÊàë‰ª¨ÁöÑÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÂèØ‰ª•ÂÆâÂÖ®‰ΩøÁî®„ÄÇ„Ääc++primer„Äãp474Ôºå690„ÄÇ</span><br>    &#123;<br>        std::cout&lt;&lt;<span class="hljs-string">&quot;ÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞&quot;</span>&lt;&lt;std::endl;        <br>        src.ptrb = <span class="hljs-literal">nullptr</span>;<span class="hljs-comment">//ËÆ∞ÂæóÂ∞ÜÂéüÊù•ÊåáÂêëÂ†ÜÂÜÖÂ≠òÁöÑÊåáÈíàÁΩÆÁ©∫.</span><br>    &#125;<br>    Foo&amp; <span class="hljs-keyword">operator</span>=(Foo&amp;&amp; src) <span class="hljs-keyword">noexcept</span><br>    &#123;<br>        std::cout&lt;&lt;<span class="hljs-string">&quot;ÁßªÂä®ËµãÂÄºÂáΩÊï∞&quot;</span>&lt;&lt;std::endl;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == &amp;src)<br>            <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>        <span class="hljs-keyword">delete</span> ptrb;<br>        ptrb = src.ptrb;<span class="hljs-comment">//ËøôÈáå‰∏çÈúÄË¶ÅÂú®newÔºåÁõ¥Êé•‰ªésrcÈÇ£ÈáåÊãøÊù•</span><br>        src.ptrb = <span class="hljs-literal">nullptr</span>;<span class="hljs-comment">//ËÆ∞ÂæóÁΩÆÁ©∫</span><br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">Foo</span>()<br>    &#123;<br>        std::cout&lt;&lt;<span class="hljs-string">&quot;ÊûêÊûÑÂáΩÊï∞&quot;</span>&lt;&lt;std::endl;<br>        <span class="hljs-keyword">delete</span> ptrb;<span class="hljs-comment">//Âà†‰∏Ä‰∏™Á©∫ÊåáÈíàÊ≤°‰ªª‰ΩïÂèçÂ∫î</span><br>    &#125;<br>    B *ptrb;<br>&#125;;<br><span class="hljs-function">Foo <span class="hljs-title">RVO_test</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Foo <span class="hljs-title">foo</span><span class="hljs-params">(val)</span></span>;<br>    <span class="hljs-keyword">return</span> foo;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Foo fooRvo = <span class="hljs-built_in">RVO_test</span>(<span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>Âú®ÂàÜÊûê‰πãÂâçÊàëÂÖàÊääËØ•Á®ãÂ∫èÁöÑÂÜÖÂ≠òÂàÜÂ∏ÉÂõæÁîªÂá∫Êù•Â∏ÆÂ§ßÂÆ∂ÁêÜËß£ÔºåËßÅ‰∏ãÂõæÔºö</p>
</blockquote>
<h2 id="ÂÉèËøôÁßçrandom-offsetÁöÑÂá∫Áé∞ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÈÅøÂÖçÊ∫¢Âá∫ÊîªÂáª„ÄÇÁîªËøôÂº†ÂõæË¶ÅÁî®Âà∞nmÂëΩ‰ª§ÔºàÂØªÊâæ‰ª£Á†ÅÊÆµÔºåbssÊÆµÂíådataÊÆµÁöÑËµ∑ÂßãÂú∞ÂùÄÔºâÔºågdbÁöÑvmmapÂëΩ‰ª§ÔºàÂØªÊâæÂ†ÜÊ†àÁöÑËµ∑ÂßãÂíåÁªìÊùüÂú∞ÂùÄÔºâ„ÄÇÁÅ∞Ëâ≤ÈÉ®ÂàÜË°®Á§∫Ëøô‰∫õËåÉÂõ¥Âú®ËøõÁ®ãËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠‰∏çÂèØÁî®Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÊ≤°Êúâ‰∏∫Ëøô‰∫õÂå∫ÂüüÂàõÂª∫È°µË°®Ôºàpage-tableÔºâ„ÄÇ"><a href="#ÂÉèËøôÁßçrandom-offsetÁöÑÂá∫Áé∞ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÈÅøÂÖçÊ∫¢Âá∫ÊîªÂáª„ÄÇÁîªËøôÂº†ÂõæË¶ÅÁî®Âà∞nmÂëΩ‰ª§ÔºàÂØªÊâæ‰ª£Á†ÅÊÆµÔºåbssÊÆµÂíådataÊÆµÁöÑËµ∑ÂßãÂú∞ÂùÄÔºâÔºågdbÁöÑvmmapÂëΩ‰ª§ÔºàÂØªÊâæÂ†ÜÊ†àÁöÑËµ∑ÂßãÂíåÁªìÊùüÂú∞ÂùÄÔºâ„ÄÇÁÅ∞Ëâ≤ÈÉ®ÂàÜË°®Á§∫Ëøô‰∫õËåÉÂõ¥Âú®ËøõÁ®ãËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠‰∏çÂèØÁî®Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÊ≤°Êúâ‰∏∫Ëøô‰∫õÂå∫ÂüüÂàõÂª∫È°µË°®Ôºàpage-tableÔºâ„ÄÇ" class="headerlink" title="&gt;ÂÉèËøôÁßçrandom offsetÁöÑÂá∫Áé∞ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÈÅøÂÖçÊ∫¢Âá∫ÊîªÂáª„ÄÇÁîªËøôÂº†ÂõæË¶ÅÁî®Âà∞nmÂëΩ‰ª§ÔºàÂØªÊâæ‰ª£Á†ÅÊÆµÔºåbssÊÆµÂíådataÊÆµÁöÑËµ∑ÂßãÂú∞ÂùÄÔºâÔºågdbÁöÑvmmapÂëΩ‰ª§ÔºàÂØªÊâæÂ†ÜÊ†àÁöÑËµ∑ÂßãÂíåÁªìÊùüÂú∞ÂùÄÔºâ„ÄÇÁÅ∞Ëâ≤ÈÉ®ÂàÜË°®Á§∫Ëøô‰∫õËåÉÂõ¥Âú®ËøõÁ®ãËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠‰∏çÂèØÁî®Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÊ≤°Êúâ‰∏∫Ëøô‰∫õÂå∫ÂüüÂàõÂª∫È°µË°®Ôºàpage tableÔºâ„ÄÇ"></a><img src="/img/00004/1.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"><br>&gt;ÂÉèËøôÁßçrandom offsetÁöÑÂá∫Áé∞ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÈÅøÂÖçÊ∫¢Âá∫ÊîªÂáª„ÄÇÁîªËøôÂº†ÂõæË¶ÅÁî®Âà∞<code>nm</code>ÂëΩ‰ª§ÔºàÂØªÊâæ‰ª£Á†ÅÊÆµÔºåbssÊÆµÂíådataÊÆµÁöÑËµ∑ÂßãÂú∞ÂùÄÔºâÔºågdbÁöÑ<code>vmmap</code>ÂëΩ‰ª§ÔºàÂØªÊâæÂ†ÜÊ†àÁöÑËµ∑ÂßãÂíåÁªìÊùüÂú∞ÂùÄÔºâ„ÄÇÁÅ∞Ëâ≤ÈÉ®ÂàÜË°®Á§∫Ëøô‰∫õËåÉÂõ¥Âú®ËøõÁ®ãËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠‰∏çÂèØÁî®Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÊ≤°Êúâ‰∏∫Ëøô‰∫õÂå∫ÂüüÂàõÂª∫È°µË°®Ôºàpage tableÔºâ„ÄÇ</h2><h2 id="ÂèçÊ±áÁºñÈÖçÂêàÂ†ÜÊ†àÂõæÂàÜÊûêÊµÅÁ®ã"><a href="#ÂèçÊ±áÁºñÈÖçÂêàÂ†ÜÊ†àÂõæÂàÜÊûêÊµÅÁ®ã" class="headerlink" title="ÂèçÊ±áÁºñÈÖçÂêàÂ†ÜÊ†àÂõæÂàÜÊûêÊµÅÁ®ã"></a>ÂèçÊ±áÁºñÈÖçÂêàÂ†ÜÊ†àÂõæÂàÜÊûêÊµÅÁ®ã</h2><p><strong>ÂèãÊÉÖÊèêÈÜíÔºöËØ∑ÈÖçÂêàÈôÑ‰ª∂‰∏≠ÁöÑÂèçÊ±áÁºñ‰ª£Á†ÅËøõË°åÂàÜÊûê„ÄÇ</strong><br><img src="/img/00004/2.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"><br><img src="/img/00004/3.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<blockquote>
<p>Âà∞ËææËøô‰∏ÄÊ≠•‰ª•ÂâçÂèëÁîüÁöÑ‰∫ãÊÉÖÊúâÔºömainÂáΩÊï∞ÂºÄËæüÂá∫‰∫Ü0x20Â≠óËäÇÁöÑÁ©∫Èó¥ÔºåÂ∞Ürbp-0x18ÁöÑÂú∞ÂùÄÔºà‰∏¥Êó∂ÂØπË±°prvalueÔºâÁªô‰∫ÜrdiÔºåÁÑ∂ÂêéÂ∞Ü0x64Áªô‰∫ÜesiÔºåÊé•ÁùÄË∞ÉÁî®‰∫ÜRVO_test(int)ÂáΩÊï∞ÔºåËøòÊ≤°push rbp„ÄÇ</p>
</blockquote>
<hr>
<p><img src="/img/00004/4.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<p><img src="/img/00004/5.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<blockquote>
<p>Âà∞ËææËøô‰∏ÄÊ≠•‰ª•ÂâçÂèëÁîüÁöÑ‰∫ãÊÉÖÊúâÔºöRVO_test(int)ÂáΩÊï∞ÂºÄËæü‰∫Ü0x30Â≠óËäÇÁöÑÁ©∫Èó¥ÔºårdiÂØÑÂ≠òÂô®Â≠òÁùÄ‰∏¥Êó∂ÂØπË±°prvalueÁöÑÂú∞ÂùÄÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ËµãÁªô‰∫Ürbp-0x8Ôºårbp-0x20Ôºårbp-0x28ÔºåÂèàÂ∞Ü0x64ËµãÁªô‰∫Ürbp-0xcÔºàÂΩ¢ÂèÇvalÔºâÔºåÊúÄÂêéÂú®‰∏¥Êó∂ÂØπË±°fooÁöÑÂú∞ÂùÄ‰∏äËøõË°å‰∫ÜÊûÑÈÄ†„ÄÇ</p>
</blockquote>
<hr>
<p><img src="/img/00004/6.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<p><img src="/img/00004/7.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<blockquote>
<p>Âà∞ËææËøô‰∏ÄÊ≠•‰ª•ÂâçÂèëÁîüÁöÑ‰∫ãÊÉÖÊúâÔºöÁºñËØëÂô®Â∞Ürbp-0x18ÔºàÂ±ÄÈÉ®ÂØπË±°fooÔºâÁöÑÂÜÖÂÆπÁßªÂä®Âà∞‰∫Ü‰∏¥Êó∂ÂØπË±°ÁöÑÈáåÈù¢„ÄÇÊ≠§Êó∂Â±ÄÈÉ®ÂØπË±°ÁöÑÊåáÈíàÊï∞ÊçÆÊàêÂëòÊåáÂêëÁ©∫ÔºåÂú®RVO_test(int)ÂáΩÊï∞ËøîÂõûÊó∂Ôºå‰ºöÊûêÊûÑËøô‰∏™Â±ÄÈÉ®ÂØπË±°ÔºåËÄådelete‰∏Ä‰∏™Á©∫ÊåáÈíàÊ≤°‰ªª‰ΩïÂèçÂ∫î„ÄÇÊúÄÂêéRVO_test(int)ÂáΩÊï∞Â∞Ürbp-0x28Âú∞ÂùÄ‰∏äÁöÑÂÜÖÂÆπËµãÁªôrax‰Ωú‰∏∫ËøîÂõûÂÄº„ÄÇ</p>
</blockquote>
<hr>
<p><img src="/img/00004/8.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<p><img src="/img/00004/9.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<blockquote>
<p>Âà∞ËææËøô‰∏ÄÊ≠•‰ª•ÂâçÂèëÁîüÁöÑ‰∫ãÊÉÖÊúâÔºöRVO_test(int)ÂáΩÊï∞ÂõûÊî∂‰∫Ü0x30Â≠óËäÇÁöÑÁ©∫Èó¥Ôºåpop rbpÊó∂‰ºöÂ∞Ü‰øùÂ≠òÁöÑmainÂáΩÊï∞ÁöÑrbpÂú∞ÂùÄÂèñÂá∫Êù•ÊîæÂà∞rbpÊ†àÂü∫ÂùÄÂØÑÂ≠òÂô®ÈáåÈù¢ÔºåÂêåÊó∂rsp‰ºö+8ÔºåÊåáÂêëË¶ÅË∑≥ËΩ¨ÁöÑ‰ª£Á†ÅÊÆµ„ÄÇÊúÄÂêé‰∏ÄÊ≠•Ê≤°ÊâßË°åÔºå‰∏çÈöæÁúãÂá∫retÊòØËÆ©ripÊåá‰ª§ÂØÑÂ≠òÂô®ÊåáÂêërspÁöÑÂÜÖÂÆπÔºåÂç≥Ë∑≥ËΩ¨Âà∞&lt;main+29&gt;„ÄÇ</p>
</blockquote>
<hr>
<p><img src="/img/00004/10.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<p><img src="/img/00004/11.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<blockquote>
<p>Âà∞ËææËøô‰∏ÄÊ≠•‰ª•ÂâçÂèëÁîüÁöÑ‰∫ãÊÉÖÊúâÔºö‰∏¥Êó∂ÂØπË±°ÁöÑÂÜÖÂÆπË¢´ÁßªÂä®ËµãÂÄºÂáΩÊï∞ËΩ¨ÁßªÂà∞‰∫ÜmainÂáΩÊï∞ÁöÑÂ±ÄÈÉ®ÂØπË±°fooRvo„ÄÇÁÑ∂Âêé‰∏¥Êó∂ÂØπË±°Â∞±Ë¢´ÊûêÊûÑ‰∫ÜÔºåÊé•ÁùÄmainÂáΩÊï∞Â∞ÜËøîÂõûÂÄº0ËµãÁªôrbp-0x4ÊâÄÊåáÁöÑÁ©∫Èó¥ÔºåÊúÄÂêéfooRvoÂØπË±°‰πüË¢´ÊûêÊûÑ„ÄÇÁ®ãÂ∫èÈöè‰πãÁªìÊùü„ÄÇ</p>
</blockquote>
<hr>
<h2 id="Â∞èÁªì"><a href="#Â∞èÁªì" class="headerlink" title="Â∞èÁªì"></a>Â∞èÁªì</h2><blockquote>
<p>Êó†RVOËøîÂõû‰ºòÂåñÔºåÁºñËØëÂô®‰ºöÁîüÊàê‰∏Ä‰∏™prvalueÊàñËÄÖxvalueÁöÑ<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/implicit_conversion">‰∏¥Êó∂ÂØπË±°ÔºàTemporary materializationÔºâ</a>Ôºà„ÄäÊ∑±Â∫¶Êé¢Á¥¢c++ÂØπË±°Ê®°Âûã„Äãp267ÔºâÔºåÂèñÂÜ≥‰∫éprvalueÊòØÂê¶Âá∫Áé∞Âú®‰∏¢ÂºÉÂÄºË°®ËææÂºèÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/expressions#Discarded-value_expressions">Discarded-value expressions</a>ÔºâÈáå„ÄÇÂÉèËøôÊ†∑ÂÜô<code>Foo fooRvo = RVO_test(100);</code>RVO_test(100)‰∫ßÁîüÁöÑ‰∏¥Êó∂ÂØπË±°Â∞±ÊòØprvalueÔºåËøôÁßçprvalueË¢´Áß∞‰∏∫‚ÄùÊúâ‰∏Ä‰∏™ÁªìÊûúÂØπË±°‚ÄùÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/value_category">such prvalue is said to have a result object</a>Ôºâ„ÄÇËÄåËøôÊ†∑ÂÜô<code>Foo fooRvo;fooRvo = RVO_test(100);</code>RVO_test(100)‰∫ßÁîüÁöÑ‰∏¥Êó∂ÂØπË±°Â∞±ÊòØxvalueÔºåÂéüÂõ†Â∞±ÊòØprvalueÂá∫Áé∞Âú®‰∫Ü‰∏¢ÂºÉÂÄºË°®ËææÂºèÈáå„ÄÇËøôÁßçË°®ËææÂºèÂåÖÊã¨‰∫Ü‰ªª‰ΩïÂÆåÊï¥Ë°®ËææÂºèËØ≠Âè•Ôºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/expressions#Discarded-value_expressions">Such expressions include the full expression of any expression statement</a>Ôºâ„ÄÇÁÑ∂Âêé‰∏¥Êó∂ÂØπË±°ÁöÑÂú∞ÂùÄ‰ºöË¢´‰º†ÂÖ•Âà∞RVO_test(int)ÂáΩÊï∞‰∏≠ÔºåËØ•ÂáΩÊï∞‰∏≠ÁöÑÂ±ÄÈÉ®ÂØπË±°fooÂú®ËøîÂõûÊó∂Ëß¶ÂèëÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞Â∞ÜfooÁöÑÂÜÖÂ≠òËΩ¨ËÆ©Áªô‰∏¥Êó∂ÂØπË±°„ÄÇ‰∏∫‰ªÄ‰πà‰ºöËß¶ÂèëÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞Âë¢ÔºüÂΩíÂäü‰∫éreturnËØ≠Âè•Ôºå‰∏Ä‰∏™Êã∑Ë¥ùÊìç‰ΩúÂèëÁîüÂú®returnËØ≠Âè•Êó∂Ôºå‰ºöË¢´ÂøΩÁï•ÊàñËÄÖË¢´ÂØπÂæÖÊàêrvalueÔºåÁõÆÁöÑÂú®‰∫éÈÄâÊã©‰∏Ä‰∏™ÈáçËΩΩÂêéÁöÑÊûÑÈÄ†ÂáΩÊï∞ÔºàNote:A copy operation associated with a return statement may be elided or considered as an rvalue for the purpose of overload resolution in selecting a constructor (12.8). ‚Äîend note,Êú¨Âè•Â≠êÂá∫Ëá™<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/compiler_support/11">c++Ê†áÂáÜÊâãÂÜåÊñáÊ°£-N2118ÁöÑ6.6.3 - The return statement</a>Ôºâ„ÄÇÁî±‰∫éÂè≥ÂÄºÂºïÁî®ÂèØ‰ª•Êé•Âèó‰∏Ä‰∏™rvalueÔºåËøô‰∏™Ë¢´returnËΩ¨ÂåñÂêéÁöÑrvalueÈÄâÊã©‰∫ÜÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞„ÄÇËá≥Ê≠§‰∏¥Êó∂ÂØπË±°Ë¢´ÊûÑÈÄ†Âá∫Êù•ÔºåRVO_test(int)ÂáΩÊï∞ÁöÑÂ±ÄÈÉ®ÂØπË±°fooË¢´ÊûêÊûÑ„ÄÇËÄå‰∏¥Êó∂ÂØπË±°prvalueÔºåÁî±‰∫éËµãÂÄºËøêÁÆóÁ¨¶ÁöÑÂ≠òÂú®Ôºå‰ºöÂéªË∞ÉÁî®ÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÔºåÔºàÁªÜÂøÉÁöÑÂ∞è‰ºô‰º¥ËÇØÂÆöË¶ÅÈóÆ‰∏∫Âï•‰∏çÊòØË∞ÉÁî®ÈáçËΩΩÂêéÁöÑÁßªÂä®ËµãÂÄºÂáΩÊï∞ÔºåÂæàÁÆÄÂçïÔºÅËµãÂÄºËøêÁÆóÁ¨¶Âú®ÂÆö‰πâÂ§ÑË°®Áé∞Âá∫Êù•ÁöÑÂΩ¢Âºè‰∏∫ÊûÑÈÄ†ËÄå‰∏çÊòØÊã∑Ë¥ùÔºâ„ÄÇÂæÖmainÂáΩÊï∞‰∏≠ÁöÑfooRvoÂØπË±°Ë¢´ÊûÑÈÄ†Âá∫Êù•ÂêéÔºå‰∏¥Êó∂ÂØπË±°‰πüË¢´ÊûêÊûÑ„ÄÇÊúÄÂêéfooRvoÂØπË±°Ë¢´ÊûêÊûÑ„ÄÇ<br>.<br>ËøôÊòØclangÁºñËØëÂô®‰∏ãËøêË°åÂÆå‰ª£Á†ÅÁöÑÁªìÊûú:<br><img src="/img/00004/12.png" srcset="/img/loading.gif" lazyload alt="ËøôÊòØËøêË°åÂÆå‰ª£Á†ÅÁöÑÁªìÊûú"></p>
<p>Ê≥®ÊÑèÔºöMSVCÁºñËØëÊúâÊé•‰ΩèËøô‰∏™Ê∞ëÈó¥Ê¶ÇÂøµÔºå‰πüÂ∞±ËØ¥<code>Foo fooRvo = RVO_test(100);</code>ËøôÊù°ËØ≠Âè•‰∏≠ÔºåRVO_test‰∫ßÁîüÁöÑ‰∏¥Êó∂ÂØπË±°‰ºöË¢´fooRvoÂØπË±°Êé•‰ΩèÔºå‰ªéËÄå‰∏çÊâßË°åÂØπ‰∏¥Êó∂ÂØπË±°ÁöÑÊûêÊûÑ„ÄÇÊàñËÄÖËØ¥fooRvoÁöÑÁ©∫Èó¥Âíå‰∏¥Êó∂ÂØπË±°ÁöÑÁ©∫Èó¥Âêà‰∫å‰∏∫‰∏Ä‰∫Ü„ÄÇÊàëÂπ≥Êó∂ÂÜô‰ª£Á†ÅÈÉΩÊòØÁî®ÁöÑclangÁºñËØëÂô®Ôºå‰ª•ÂâçÂàöÂºÄÂßãÂ≠¶c++ÊòØÂú®MSVCÊâÄ‰ª•ËøôÈáåÂ∞±Á®çÂæÆÊèêÂèä‰∏Ä‰∏ãMSVCÁöÑ‰∏çÂêå‰πãÂ§Ñ„ÄÇ<br>.<br>ËøôÊòØMSVCÁºñËØëÂô®‰∏ãËøêË°åÂÆå‰ª£Á†ÅÁöÑÁªìÊûúÔºö<br><img src="/img/00004/13.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</blockquote>
<hr>
<h1 id="ÂºÄÂêØRVO‰ºòÂåñ"><a href="#ÂºÄÂêØRVO‰ºòÂåñ" class="headerlink" title="ÂºÄÂêØRVO‰ºòÂåñ"></a>ÂºÄÂêØRVO‰ºòÂåñ</h1><blockquote>
<p>‰ª£Á†ÅËøòÊòØÁî®‰∏äÈù¢ÁöÑ‰ª£Á†Å</p>
</blockquote>
<p><img src="/img/00004/14.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"><br><img src="/img/00004/15.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<blockquote>
<p>‰∏äÈù¢Â∑≤ÁªèÂ∏¶ÁùÄÂ§ßÂÆ∂ÂàÜÊûêËøá‰∏ÄÈÅç‰∫ÜÔºåËøôÈáåÂ∞±Áõ¥Êé•Ë∑≥Âà∞ÊúÄÂêéÁúãÁªìÊûú„ÄÇ<br>ÂØπÊØîÂÖ≥Èó≠RVOÊù•ËØ¥ÔºåRVO_test(int)ÂáΩÊï∞ÁöÑÂ±ÄÈÉ®ÂØπË±°Â∞±ÊòØÁõ¥Êé•ÊûÑÈÄ†Âà∞fooRvoÂØπË±°ÈáåÈù¢Âéª‰∫ÜÔºå‰∏≠Èó¥‰∏Ä‰∏™ÁßªÂä®ÊûÑÈÄ†ÈÉΩÊ≤°Êúâ„ÄÇÈÄöËøáÂàÜÊûêÂèçÊ±áÁºñ‰ª£Á†Å‰∏çÈöæÂèëÁé∞ÔºåÂÆÉ‰∏∫‰∫Ü‰ºòÂåñËøîÂõûÂ±ÄÈÉ®ÂØπË±°ÔºåÁõ¥Êé•ËÆ©fooRvoÂØπË±°ÁöÑÂÜÖÂ≠òÊé•ÁÆ°‰∫ÜÂ±ÄÈÉ®ÂØπË±°fooÁöÑÔºåÂèØ‰ª•ËØ¥ÊòØÂêà‰∫å‰∏∫‰∏Ä‰∫Ü„ÄÇ‰ΩÜÊòØÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ±ÄÈÉ®ÂØπË±°foo‰∏ÄÂÆöË¶ÅÊâßË°åÊûêÊûÑÂáΩÊï∞ÂëÄÔºÅÂà´ÊÄ•ÔºåÂÆÉËøôÈáåÂ¶ôÊâãÂõûÊò•‰∏ÄÊâãÔºåÂ∞Ü‰∏ÄÂ≠óËäÇÁöÑÊ†áÂøó‰ΩçÊîæÂú®‰∫ÜRVO_test(int)ÂáΩÊï∞ÁöÑÊ†àÂ∏ß‰∏≠ÔºåÁÑ∂ÂêéÈÄöËøáÂà§Êñ≠Ê†áÂøó‰ΩçË∑≥ËøáÂØπÂ±ÄÈÉ®ÂØπË±°fooÁöÑÊûêÊûÑÂáΩÊï∞ÊâßË°å„ÄÇËøôÁé©ÊÑèÂÑøÊúâÁÇπÂÉèÂä†‰∫ÜifÁöÑgoto :)„ÄÇ<br>.<br>ËøôÊòØclangÁºñËØëÂô®‰∏ãËøêË°åÂÆå‰ª£Á†ÅÁöÑÁªìÊûú:<br><img src="/img/00004/16.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"><br>ÊúâÂÖ≥‰∏¥Êó∂ÂØπË±°ÁöÑËÆ§ËØÜÂèØ‰ª•ÂèÇËÄÉ„ÄäÊ∑±Â∫¶Êé¢Á¥¢c++ÂØπË±°Ê®°Âûã„Äãp267</p>
</blockquote>
<hr>
<h1 id="xvalue-prvalueÂíålvalue"><a href="#xvalue-prvalueÂíålvalue" class="headerlink" title="xvalue,prvalueÂíålvalue"></a>xvalue,prvalueÂíålvalue</h1><blockquote>
<p>ËøôÈáåÁ¨îËÄÖÂ∞±Â∏ÆÂ§ßÂÆ∂ÊääÂùëÂ°´‰∏äÔºåÁõ∏‰ø°Â§ßÂÆ∂ÂØπ‰∏äÈù¢ÊµãËØï‰ª£Á†ÅÂàÜÊûêËøáÂêé‰ºöÂØπprvalueÂíåxvalueÊúâ‰∏™ÂàùÊ≠•ÁöÑÂç∞Ë±°ÔºåÂç≥ÂáΩÊï∞ËøîÂõûÊó∂ÂèØËÉΩ‰ºöÊ∂âÂèäÂà∞ÂÆÉ‰ª¨„ÄÇ<br>ÂØπ‰∫éËøô‰∏âÁßçÂÄºÁöÑÊ¶ÇËø∞Ôºö<br>ÊØè‰∏Ä‰∏™c++ÁöÑË°®ËææÂºèÔºà‰ΩúÁî®Âú®ËøêÁÆóÂØπË±°‰∏äÁöÑÈáçËΩΩÊìç‰ΩúÁ¨¶ÔºåÂ≠óÈù¢Â∏∏ÈáèÔºå‰∏Ä‰∏™ÂèòÈáèÂêçÔºå‚Äùa &#x3D; b‚ÄùÔºàan assignment expressionÔºâÔºåetc.ÔºâÈÉΩ‰ºöÊúâ‰∏§‰∏™Áã¨Á´ãÁöÑÂ±ûÊÄßÔºö‰∏ÄÁßçÁ±ªÂûãÔºå‰∏Ä‰∏™ÂÄºÁöÑÁ±ªÂà´„ÄÇÊØè‰∏™Ë°®ËææÂºèÈÉΩÊúâ‰∏Ä‰∫õÈùûÂºïÁî®Á±ªÂûãÔºåÂπ∂‰∏îÊØè‰∏™Ë°®ËææÂºèÈÉΩÊÅ∞Â•ΩÂ±û‰∫é‰∏â‰∏™‰∏ªË¶ÅÂÄºÁ±ªÂà´‰∏≠ÁöÑ‰∏Ä‰∏™:prvalue„ÄÅxvalueÂíålvalue„ÄÇËøô‰∏âÁßçÂÄºÊ≤°Êúâ‰∏Ä‰∏™Á°ÆÂàáÁöÑÂÆö‰πâÔºåÊàñËÄÖËØ¥‰Ω†Ë¶ÅÂ∫üÂæàÂ§ßÂäüÂ§´ÂéªÂÆö‰πâÂÆÉ‰ª¨Ôºå‰∫¶ÊàñËÄÖÊèèËø∞‰∏™Â§ßÊ¶ÇÂç≥ÂèØ„ÄÇ<br>‰∏ãÈù¢Êàë‰ª¨Êù•ÁúãËøô‰∏âÁßçÂÄºÁ±ªÂûãÁöÑÊ¶ÇË¶ÅÂÆö‰πâ‰ª•ÂèäÁâπÊÄßÔºàÂÆåÊï¥ËØ∑ÂèÇËÄÉ<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/value_category">Value categories</a>ÔºâÔºö<br>ÔºàË°•ÂÖÖ‰∏ÄÂè•ÔºåÊ£ÄÊµãË°®ËææÂºèÁöÑÂÄºÁ±ªÂà´ÁöÑÁõ∏ÂÖ≥‰ª£Á†ÅÔºåÊàëÊîæÂú®‰∫ÜÈôÑÂΩï‰∏≠ÔºåÊÑüÂÖ¥Ë∂£ÁöÑËØªËÄÖÂèØ‰ª•Ëá™Ë°åÈ™åËØÅÊÑüÂà∞ÁñëÊÉëÁöÑÂú∞ÊñπÔºâ</p>
</blockquote>
<ul>
<li>lvalue<blockquote>
<p>lvalueÔºöÊâÄË∞ìÂ∑¶ÂÄºÔºå‰ªéÂéÜÂè≤ÁöÑËßíÂ∫¶Êù•ËÄÉËôëÔºåÂÆÉÂèØ‰ª•Âá∫Áé∞Âú®‰∏Ä‰∏™ËµãÂÄºË°®ËææÂºèÁöÑÂ∑¶Ëæπ„ÄÇËµÑÊ∫êÂèØ‰ª•Ë¢´ÈáçÁî®Ôºàresources can be reusedÔºâ„ÄÇÊúâÁ©∫Èó¥Âú∞ÂùÄ‰ΩÜ‰∏çËÉΩË¢´ÁßªÂä®</p>
<ul>
<li>‰∏ÄËà¨ÊúâÂêçÂ≠óÔºåÈô§‰∫Ü unamed lvalueÔºà<code>*ptr </code>ÊòØ‰∏Ä‰∏™Ê≤°ÊúâÂêçÂ≠óÁöÑlvalueÔºå‰∏Ä‰∏™ËøîÂõûÂÄº‰∏∫lvalue referenceÁöÑÂáΩÊï∞Ë∞ÉÁî®Ë°®ËææÂºè‰πüÊòØÊ≤°ÂêçÂ≠óÁöÑlvalueÔºâÔºåÂ¶ÇÊûúÊúâÂçïÁã¨ÁöÑ‰∏Ä‰∏™ identifier Êù•Ë°®Á§∫ÂÆÉÔºåÂÆÉ‰∏ÄÂÆöÊòØ lvalue</li>
<li>ÂèØ‰ª•Áî® &amp; Á¨¶Âè∑ÂèñÂÖ∂Âú∞ÂùÄÔºåÈô§‰∫Übit fieldÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/bit_field">The type of a bit field can only be integral or enumeration type.</a>Ôºâ</li>
<li>‰∏Ä‰∏™ÂáΩÊï∞ÊàñËÄÖÈáçËΩΩÊìç‰ΩúÁ¨¶ÁöÑËøîÂõûÂÄº‰∏∫lvalue reference<br>‰æãÂ¶Ç <code>std::getline(std::cin, str) or std::cout &lt;&lt; 1 or str1 = str2 or ++iter</code></li>
<li>ÂÖ∂ÁîüÂëΩÂë®Êúü‰∏∫ÂÖ∂ÊâÄÂú®ÁöÑ scope</li>
<li>‰∏Ä‰∫õÂÜÖÁΩÆÊìç‰ΩúÁ¨¶Ë°®ËææÂºè<br>ÂÜÖÁΩÆÂâçËá™Â¢ûËá™ÂáèÔºåËß£ÂºïÁî®ÔºåÂÜÖÁΩÆ‰∏ãÊ†áË°®ËææÂºèÔºà<code>a[n]</code>ÊòØ‰∏Ä‰∏™lvalueÁöÑÊÉÖÂÜµ‰∏ãÔºâÔºåÁ±ªÁ±ªÂûãÁöÑÂÜÖÁΩÆÊàêÂëòËÆøÈóÆË°®ËææÂºèÔºàÈô§‰∫ÜËÆøÈóÆÊûö‰∏æÊï∞ÊçÆÊàêÂëòÂíåÈùûÈùôÊÄÅÊàêÂëòÂáΩÊï∞ÔºåËøòÊúâ‰∏Ä‰∫õÁâπ‰æãËØ∑ÂèÇËÄÉ<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/value_category">Primary categories</a>ÔºâÔºåÈÄóÂè∑Ë°®ËææÂºèÔºàÊúÄÂè≥ËæπÁöÑÊìç‰ΩúÊï∞‰∏∫lvalueÁöÑÊÉÖÂÜµ‰∏ãÔºâÔºå‰∏âÂÖÉÊù°‰ª∂Ë°®ËææÂºèÔºàÁ¨¨‰∫å‰∏™ÂíåÁ¨¨‰∏â‰∏™Êìç‰ΩúÊï∞‰∏∫lvalueÁöÑÊÉÖÂÜµ‰∏ãÔºâ</li>
<li>Â∞ÜË°®ËææÂºèÂº∫Âà∂ËΩ¨Êç¢‰∏∫Â∑¶ÂÄºÂºïÁî®Á±ªÂûãÂíåÂè≥ÂÄºÂºïÁî®ÂáΩÊï∞ÁΩ≤ÂêçÁ±ªÂûãÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/book/intro/functions">The signature of a function</a>Ôºâ<br>‰æãÂ¶Ç <code>static_cast&lt;int&amp;&gt;(x)</code><br>‰æãÂ¶Ç <code>static_cast&lt;void (&amp;&amp;)(int)&gt;(x)</code></li>
<li>Âú®ÊâÄÊúâ literal ‰∏≠ÔºåÂè™Êúâ string literal ÊòØ lvalueÔºö<code>cout &lt;&lt; &amp;&quot;dy&quot; &lt;&lt; endl</code>;ÔºàÂÖ∂‰ªñ literal ÊòØ rvalueÔºö<code>cout &lt;&lt; &amp;&#39;d&#39; &lt;&lt; endl</code>; ÈùûÊ≥ïÔºâ</li>
</ul>
<h2 id="lvalueÁöÑÁâπÊÄßÔºö"><a href="#lvalueÁöÑÁâπÊÄßÔºö" class="headerlink" title="lvalueÁöÑÁâπÊÄßÔºö"></a>lvalueÁöÑÁâπÊÄßÔºö</h2></blockquote>
</li>
</ul>
<blockquote>
<ul>
<li>ÂèØ‰ª•ÈÄöËøáÂèñÂùÄËøêÁÆóÁ¨¶Ëé∑ÂèñÂÖ∂Âú∞ÂùÄÔºå<code>&amp;++i[1]</code> and <code>&amp;std::endl </code>ÂÉèËøôÊ†∑ÁöÑË°®ËææÂºèÈÉΩÊòØÂêàÊ≥ïÁöÑ</li>
<li>ÂèØ‰øÆÊîπÁöÑÂ∑¶ÂÄºÂèØÁî®‰ΩúÂÜÖÁΩÆËµãÂÄºÂíå<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/operator_assignment#Builtin_compound_assignment">ÂÜÖÁΩÆÂ§çÂêàËµãÂÄºËøêÁÆó</a>Á¨¶ÁöÑÂ∑¶Êìç‰ΩúÊï∞</li>
<li>ÂèØ‰ª•Áî®Êù•ÂàùÂßãÂåñÂ∑¶ÂÄºÂºïÁî®ÔºåËøô‰∏™Â∑¶ÂÄºÂºïÁî®Â∞ÜÊòØlvalueÁöÑÂà´Âêç„ÄÇ</li>
<li>lvalueÂèØ‰ª•Ë¢´ÈöêÂºèÂú∞ËΩ¨Êç¢‰∏∫prvalueÂ∞±ÂÉèlvalue-to-rvalue, array-to-pointer, or function-to-pointerÁöÑÈöêÂºèËΩ¨Êç¢„ÄÇÔºà<code>int ival1 = 1;int ival2 = -ival1;</code>ÔºåËøôÈáåÂáèÂè∑ÂèØ‰ª•lvalueÈöêÂºèËΩ¨Êç¢ÊàêprvalueÔºâ</li>
<li>ÂèØ‰ª•ÊòØÂ§öÊÄÅÁöÑÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/object#Polymorphic_objects">Polymorphic</a>ÔºâÔºåÂÆÉÊâÄÂØπÂ∫îÁöÑ<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/type#Dynamic_type">Âä®ÊÄÅÁ±ªÂûã</a>ÂíåÈùôÊÄÅÁ±ªÂûãÂèØ‰ª•‰∏ç‰∏ÄÊ†∑Ôºå‰æãÂ¶ÇÔºö‰∏Ä‰∏™ÊåáÂêëÂ≠êÁ±ªÁöÑÁà∂Á±ªÊåáÈíà</li>
<li>ÂèØ‰ª•ÊòØ<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/type#Incomplete_type">‰∏çÂÆåÊï¥Á±ªÂûã</a>ÔºåÂè™Ë¶ÅË°®ËææÂºèÂÖÅËÆ∏„ÄÇ‰æãÂ¶ÇÔºöÁî±ÂâçÁΩÆÂ£∞Êòé‰ΩÜÊú™ÂÆö‰πâÁöÑÁ±ªÁ±ªÂûã</li>
</ul>
</blockquote>
<ul>
<li>xvalue<blockquote>
<p>xvalueÔºö‰∏Ä‰∏™Â∞ÜË¶ÅÂà∞ÊúüÁöÑÂÄºÔºàÁîüÂëΩÂë®ÊúüË¢´Âª∂ÈïøÔºâÔºåËµÑÊ∫êÂèØ‰ª•Ë¢´ÈáçÁî®ÁöÑÂØπË±°„ÄÇÊúâÁ©∫Èó¥Âú∞ÂùÄÂèØ‰ª•Ë¢´ÁßªÂä®„ÄÇ</p>
<ul>
<li>‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®ÊàñËÄÖÈáçËΩΩÊìç‰ΩúÁ¨¶ÂáΩÊï∞Ë°®ËææÂºèÁöÑËøîÂõûÂÄº‰∏∫rvalue reference<br>‰æãÂ¶Ç <code>std::move(x)</code>Ôºõ</li>
<li>Â∞ÜË°®ËææÂºèÁöÑÁ±ªÂûãÂº∫Âà∂ËΩ¨Êç¢‰∏∫Âè≥ÂÄºÂºïÁî®Á±ªÂûã„ÄÇ<br>‰æãÂ¶Ç<code>(int&amp;&amp;)a</code>Ôºå<code>static_cast&lt;int&amp;&amp;&gt;(a)</code>„ÄÇ</li>
<li>ÂÜÖÁΩÆ‰∏ãÊ†áË°®ËææÂºèÔºà<code>a[n]</code>‰∏∫‰∏Ä‰∏™xvalueÁöÑÊÉÖÂÜµ‰∏ãÔºâ„ÄÇ</li>
<li>Á±ªÁ±ªÂûãÁöÑÂÜÖÁΩÆÊàêÂëòËÆøÈóÆË°®ËææÂºè„ÄÇ<br>‰æãÂ¶Ç<code>a.m</code>ÊòØ‰∏Ä‰∏™ xvalueÔºåaÊòØxvalueÔºåmÊòØÈùûÂºïÁî®Á±ªÂûãÁöÑÈùûÈùôÊÄÅÊï∞ÊçÆÊàêÂëò„ÄÇ<br>‰ª•Âèä <code>a.*mp </code>ÊòØ‰∏Ä‰∏™ xvalue„ÄÇaÊòØxvalueÔºåmp Âè´ÂÅö pointer to data memberÔºà„Ääc++primer„Äãp739Ôºâ„ÄÇ</li>
<li>‰∏âÂÖÉÊù°‰ª∂Ë°®ËææÂºèÔºàÁ¨¨‰∫å‰∏™ÂíåÁ¨¨‰∏â‰∏™Êìç‰ΩúÊï∞‰∏∫xvalueÁöÑÊÉÖÂÜµ‰∏ãÔºâ</li>
<li>ÊåáÂÆö‰∏¥Êó∂ÂØπË±°ÁöÑ‰ªª‰ΩïË°®ËææÂºèÔºàÈô§‰∫Üprvalue initializes an objectÁöÑÊÉÖÂÜµÔºâ(since C++17)<h2 id="xvalueÁöÑÁâπÊÄßÔºö"><a href="#xvalueÁöÑÁâπÊÄßÔºö" class="headerlink" title="xvalueÁöÑÁâπÊÄßÔºö"></a>xvalueÁöÑÁâπÊÄßÔºö</h2></li>
</ul>
</blockquote>
</li>
</ul>
<blockquote>
<ul>
<li>ÂèØ‰ª•Ë¢´ÁªëÂÆöÂà∞Âè≥ÂÄºÂºïÁî®ÂíåconstÂ∑¶ÂÄºÂºïÁî®ÔºåÂêåÊó∂ÁîüÂëΩÂë®ÊúüË¢´Âª∂ÈïøÂà∞Ëøô‰∏™ÂºïÁî®ÁöÑ‰ΩúÁî®ÂüüÁªìÊùü</li>
<li>xvalueÂèØ‰ª•ÂÖ∑ÊúâÂ§öÊÄÅÊÄßÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/object#Polymorphic_objects">Polymorphic</a>Ôºâ</li>
<li>ÈùûÁ±ªÁ±ªÂûãÁöÑxvalueÂèØ‰ª•Ë¢´constÂíåvolatile‰øÆÈ•∞Ôºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/cv">cv type qualifiers</a>Ôºâ</li>
<li>xvalueÂèØ‰ª•Ë¢´ÈöêÂºèÂú∞ËΩ¨Êç¢‰∏∫prvalueÂ∞±ÂÉèlvalue-to-rvalue, array-to-pointer, or function-to-pointerÁöÑÈöêÂºèËΩ¨Êç¢<br>Ôºà<code>int ival = 1;if((int&amp;&amp;)ival)&#123;putchar(&#39;Y&#39;);&#125;</code>xvalueË¢´ÈöêÂºèËΩ¨Êç¢Êàê‰∫ÜprvalueÔºâ</li>
<li>ÂèØ‰ª•ÊòØ‰∏çÂÆåÊï¥Á±ªÂûã</li>
<li>‰∏çËÉΩË¢´ÂèñÂú∞ÂùÄÔºàÈÄöËøáÂÜÖÁΩÆÂèñÂú∞ÂùÄËøêÁÆóÁ¨¶Ôºâ</li>
<li>‰∏çËÉΩÊòØÂÜÖÁΩÆËµãÂÄºÂíå<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/operator_assignment#Builtin_compound_assignment">ÂÜÖÁΩÆÂ§çÂêàËµãÂÄºËøêÁÆó</a>Á¨¶ÁöÑÂ∑¶Êìç‰ΩúÊï∞</li>
<li>ÂΩì‰ΩúÁî®Âú®ÂáΩÊï∞ÂèÇÊï∞Êó∂ÔºåÊúâ‰∏§‰∏™ÂáΩÊï∞ÈáçËΩΩÈÉΩÂèØÁî®Ôºå‰∏Ä‰∏™ÊòØÂè≥ÂÄºÂºïÁî®ÂèÇÊï∞ÔºåÂè¶‰∏Ä‰∏™ÊòØconstÂ∑¶ÂÄºÂºïÁî®ÂèÇÊï∞Ôºå‰∏Ä‰∏™xrvalue‰ºöÁªëÂÆöÂà∞ÂèÇÊï∞‰∏∫Âè≥ÂÄºÂºïÁî®ÁöÑÈáçËΩΩÂáΩÊï∞‰∏äÔºàÂõ†Ê≠§ÔºåÊã∑Ë¥ùÂíåÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÈÉΩÂ≠òÂú®Êó∂Ôºå‰∏Ä‰∏™xrvalue‰ºöÂéªË∞ÉÁî®ÁßªÂä®ÊûÑÈÄ†ËÄå‰∏çÊòØÊã∑Ë¥ùÊûÑÈÄ†ÔºåÂêåÁêÜ‰ΩúÁî®‰∫éÊã∑Ë¥ùÂíåÁßªÂä®ËµãÂÄºËøêÁÆóÁ¨¶Ôºâ</li>
</ul>
</blockquote>
<ul>
<li>prvalue<blockquote>
<p>prvalueÔºö‰∏Ä‰∏™Â∞ÜË¶ÅÊ∂à‰∫°ÁöÑÂÄºÔºàÁîüÂëΩÂë®ÊúüÈ©¨‰∏äÁªìÊùüÔºâÔºåËµÑÊ∫ê‰∏çÂèØ‰ª•Ë¢´ÈáçÁî®ÔºàÊÉ≥Ë¶ÅË¢´ÈáçÁî®ÂøÖÈ°ªËΩ¨ÂåñÊàêxvalueÔºâÁöÑÂØπË±°„ÄÇ‰∏ÄÈÉ®ÂàÜÊúâÁ©∫Èó¥Âú∞ÂùÄ‰ΩÜÈ©¨‰∏äÂ∞±‰ºöË¢´ÂõûÊî∂ÔºàÁ©∫Èó¥Âú∞ÂùÄÂèØ‰ª•Ë¢´ÂêéÈù¢ÁöÑÊñ∞Êï∞ÊçÆË¶ÜÁõñÔºâÔºå‰∏ÄÈÉ®ÂàÜÊ≤°ÊúâÁ©∫Èó¥Âú∞ÂùÄ„ÄÇÂèØ‰ª•Ë¢´ÁßªÂä®„ÄÇ</p>
<ul>
<li>ÊâÄÊúâ literalsÔºöbool literal (‰æãÂ¶Ç<code> true</code>)Ôºåinteger literal (‰æãÂ¶Ç <code>42</code>) Á≠âÁ≠âÔºàÊó†Á©∫Èó¥Âú∞ÂùÄÔºâ„ÄÇ</li>
<li>ÂÆûË¥®‰∏äÁöÑÂáΩÊï∞Ë∞ÉÁî®Ôºö(<strong>return non-reference</strong>)ÔºàÊúâÁ©∫Èó¥Âú∞ÂùÄÔºâ<br><code>f() </code>function call<br><img src="/img/00004/17.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></li>
</ul>
<p><code>a.f() </code>static or non-static member function<br><code>A()</code> ÂåÖÊã¨ÂêÑÁßçÊûÑÈÄ†ÂáΩÊï∞<br><code>str1 + str2</code> ÈáçËΩΩ operator ‰πüÁõ∏ÂΩì‰∫éÂáΩÊï∞Ë∞ÉÁî®<br><code>functor()</code> (ÂØπÂ∫î operator() ÈáçËΩΩ)<br><code>[]&#123;&#125;() </code>lambda (ÂØπÂ∫î operator() ÈáçËΩΩ)</p>
<ul>
<li>‰∏Ä‰∫õÂÜÖÁΩÆÊìç‰ΩúÁ¨¶‰∫ßÁîüÁöÑËøêÁÆóÁªìÊûúÔºàÊó†Á©∫Èó¥Âú∞ÂùÄÔºâÔºö<br><code>a++</code> Ëá™Â¢ûËá™Âáè<br><code>a+b</code> Âä†Âáè‰πòÈô§<br><code>a&amp;b</code> ‰ΩçËøêÁÆó<br><code>a&amp;&amp;b</code> ÈÄªËæëËøêÁÆó<br><code>a&lt;b</code> ÂÖ≥Á≥ªËøêÁÆó<br><code>&amp;a</code> ÂèñÂú∞ÂùÄ<br><code>a, b</code> comma expression (Â¶ÇÊûúb ÊòØ rvalue)<br><code>(int)a</code> Êàñ static_cast&lt; int&gt;(a) Âº∫Âà∂Á±ªÂûãËΩ¨Êç¢<br><code>a ? b : c </code>ÔºàÁ¨¨‰∫å‰∏™ÂíåÁ¨¨‰∏â‰∏™Êìç‰ΩúÊï∞‰∏∫rvalueÁöÑÊÉÖÂÜµ‰∏ãÔºâ</li>
<li>enumerator Êûö‰∏æÂÄºÔºàÊó†Á©∫Èó¥Âú∞ÂùÄÔºâÔºö<br><code>enum &#123; yes, no &#125;;</code> ‰∏≠ÁöÑ yes, no<br><code>a.m</code> Êàñ <code>p-&gt;m</code>ÔºåÂÖ∂‰∏≠ m ÊòØ member enumerator</li>
<li>ÊôÆÈÄöÊàêÂëòÂáΩÊï∞Êú¨Ë∫´Ôºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/book/intro/functions">The signature of a function</a>ÔºâÔºàÊó†Á©∫Èó¥Âú∞ÂùÄÔºâ<br><code>a.m</code> Êàñ <code>p-&gt;m</code> Êàñ <code>a.*pm</code> Êàñ <code>p-&gt;*pm</code>ÔºåÂÖ∂‰∏≠ m Âíå pm ÈÉΩÂØπÂ∫îÊôÆÈÄöÊàêÂëòÂáΩÊï∞(non-static)</li>
<li>this ÊåáÈíàÔºàÊúâÁ©∫Èó¥Âú∞ÂùÄÔºâ<br>Ë¢´ÂΩìÂÅöÂèÇÊï∞‰º†ËøõÂéªÊîæÂú®Ê†àÂ∏ß‰∏ä„ÄÇ<h2 id="prvalueÁöÑÁâπÊÄßÔºö"><a href="#prvalueÁöÑÁâπÊÄßÔºö" class="headerlink" title="prvalueÁöÑÁâπÊÄßÔºö"></a>prvalueÁöÑÁâπÊÄßÔºö</h2></li>
<li>‰∏ç‰ºöÊòØÂ§öÊÄÅÁöÑ</li>
<li>ÈùûÁ±ªÈùûÊï∞ÁªÑÁöÑprvalue‰∏çËÉΩË¢´cv-qualified‰øÆÈ•∞ÔºåÈô§ÈùûÂÆÉ‰∏∫‰∫ÜË¢´ÁªëÂÆöÂà∞‰∏Ä‰∏™cv-qualifiedÁöÑÂºïÁî®Á±ªÂûã‰∏äËÄåËΩ¨Êç¢ÂåñÊàêxvalue (since C++17)Ôºå      ‰æãÂ¶Ç Ôºö<code>const int&amp; i = 1Ôºõ</code>(Ê≥®ÊÑèÔºö‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®ÊàñËÄÖÂº∫Âà∂Á±ªÂûãËΩ¨Êç¢Ë°®ËææÂºè‰ºöÂØºËá¥ÁîüÊàê‰∏Ä‰∏™ÈùûÁ±ªcv-qualifiedÁ±ªÂûãÔºå‰ΩÜÊòØcv-qualifierÈÄöÂ∏∏‰ºöÁ´ãÂç≥Ë¢´Ââ•Á¶ª„ÄÇ)</li>
<li>prvalue‰∏çËÉΩÊúâ‰∏çÂÆåÊï¥ÁöÑÁ±ªÂûãÔºà‰ΩøÁî®decltypeÊåáÁ§∫Á¨¶Êó∂‰πü‰∏çËÉΩÊúâÔºåÈô§‰∫ÜvoidÔºâ</li>
<li>prvalue‰∏çËÉΩÊúâÊäΩË±°Á±ªÁ±ªÂûãÊàñËÄÖan array thereofÔºà‰∏çÂ§™ÊáÇÂÆòÊñπË¶ÅË°®ËææÁöÑÊÑèÊÄùÔºåÊâÄ‰ª•Â∞±‰ª•Ëã±ÊñáÊñπÂºèÊîæÂú®ËøôÈáå‰æõÂ§ßÂÆ∂ÂèÇËÄÉÔºâ:(</li>
<li>‰∏çËÉΩË¢´ÂèñÂú∞ÂùÄÔºàÈÄöËøáÂÜÖÁΩÆÂèñÂú∞ÂùÄËøêÁÆóÁ¨¶Ôºâ</li>
<li>‰∏çËÉΩÊòØÂÜÖÁΩÆËµãÂÄºÂíå<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/operator_assignment#Builtin_compound_assignment">ÂÜÖÁΩÆÂ§çÂêàËµãÂÄºËøêÁÆó</a>Á¨¶ÁöÑÂ∑¶Êìç‰ΩúÊï∞</li>
<li>ÂΩì‰ΩúÁî®Âú®ÂáΩÊï∞ÂèÇÊï∞Êó∂ÔºåÊúâ‰∏§‰∏™ÂáΩÊï∞ÈáçËΩΩÈÉΩÂèØÁî®Ôºå‰∏Ä‰∏™ÊòØÂè≥ÂÄºÂºïÁî®ÂèÇÊï∞ÔºåÂè¶‰∏Ä‰∏™ÊòØconstÂ∑¶ÂÄºÂºïÁî®ÂèÇÊï∞Ôºå‰∏Ä‰∏™prvalue‰ºöÁªëÂÆöÂà∞ÂèÇÊï∞‰∏∫Âè≥ÂÄºÂºïÁî®ÁöÑÈáçËΩΩÂáΩÊï∞‰∏äÔºàÂõ†Ê≠§ÔºåÊã∑Ë¥ùÂíåÁßªÂä®ÊûÑÈÄ†ÂáΩÊï∞ÈÉΩÂ≠òÂú®Êó∂Ôºå‰∏Ä‰∏™prvalue‰ºöÂéªË∞ÉÁî®ÁßªÂä®ÊûÑÈÄ†ËÄå‰∏çÊòØÊã∑Ë¥ùÊûÑÈÄ†ÔºåÂêåÁêÜ‰ΩúÁî®‰∫éÊã∑Ë¥ùÂíåÁßªÂä®ËµãÂÄºËøêÁÆóÁ¨¶Ôºâ</li>
</ul>
</blockquote>
</li>
</ul>
<hr>
<h1 id="Temporary-materialization"><a href="#Temporary-materialization" class="headerlink" title="Temporary materialization"></a>Temporary materialization</h1><blockquote>
<p>ÁªèËøáÂØπxvalue,prvalueÂíålvalueÂØπËÆ§ËØÜÂêéÔºåÂí±‰ª¨Êù•ËÅäËÅä‰∏¥Êó∂ÂØπË±°ÔºåÈô§‰∫ÜxvalueÂèØ‰ª•Ë¢´Áß∞‰∏∫‰∏¥Êó∂ÂØπË±°ÔºåprvalueÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ã‰πüÂèØ‰ª•Ë¢´Áß∞‰∏∫‰∏¥Êó∂ÂØπË±°„ÄÇ‰ªé‰∏Ä‰∏™‰ªª‰ΩïÂÆåÊï¥Á±ªÂûãTÁöÑprvalueËΩ¨Êç¢‰∏∫Áõ∏ÂêåÁ±ªÂûãTÁöÑxvalueÁöÑËøáÁ®ãË¢´Áß∞‰∏∫‰∏¥Êó∂Áâ©ÂåñÔºàTemporary materializationÔºâ„ÄÇËØ•ËΩ¨Êç¢Â∞Üprvalue‰Ωú‰∏∫ÂÖ∂ÁªìÊûúÂØπË±°Ê±ÇÂÄºÔºå‰ªéËÄåÂ∞ÜprvalueÂàùÂßãÂåñ‰∏∫TÁ±ªÂûãÁöÑ‰∏¥Êó∂ÂØπË±°ÔºåÂπ∂ÁîüÊàê‰∏Ä‰∏™Ë°®Á§∫‰∏¥Êó∂ÂØπË±°ÁöÑxvalue(since C++17)„ÄÇÂ¶ÇÊûúTÊòØ‰∏Ä‰∏™Á±ªÊàñËÄÖÁ±ªÁ±ªÂûãÁöÑÊï∞ÁªÑÔºåÂÆÉÂøÖÈ°ªÂÖ∑ÊúâÂèØËÆøÈóÆ‰∏îÊú™Âà†Èô§ÁöÑÊûêÊûÑÂáΩÊï∞„ÄÇ<br>Temporary materialization ‰ºöÂèëÁîüÂú®‰∏ãÂàóÊÉÖÂÜµ‰∏≠Ôºö**(since C++17)**</p>
<ul>
<li>ÁªëÂÆö‰ΩúÁî®‰∫éprvalueÊó∂<br><code>int&amp;&amp; c = 1;const int&amp; c = 1;</code>cÁªëÂÆöÁöÑÊòØ‰∏Ä‰∏™xvalue</li>
<li>Âú®‰∏Ä‰∏™prvalueÁ±ª‰∏ä‰ΩøÁî®ÊàêÂëòËÆøÈóÆËøêÁÆóÁ¨¶Êó∂<br><code>A().m; </code>pvalue A() Ëá™Âä®ÂèòÊàê‰∏Ä‰∏™ xvlaue<br><code>A().*mp;</code> pvalue A() Ëá™Âä®ÂèòÊàê‰∏Ä‰∏™ xvlaue</li>
<li>prvalueÊï∞ÁªÑËΩ¨ÂèòÊàê‰∏Ä‰∏™ÊåáÈíàÊàñË¢´ÁªëÂÆöÊó∂ÔºåÊàñËÄÖÁî®‰∏ãÊ†áËÆøÈóÆ‰∏Ä‰∏™prvalueÊï∞ÁªÑ<br>1.prvalueÊï∞ÁªÑË¢´ÁªëÂÆöÊó∂<br><code>int (&amp;&amp; a)[2] = (int[])&#123;1, 2&#125;;</code><br>2.prvalueÊï∞ÁªÑËΩ¨ÂèòÊàê‰∏Ä‰∏™ÊåáÈíàÊó∂<br><code>[](int* iptr)&#123;std::cout&lt;&lt;*iptr;&#125;((int[])&#123;1,2&#125;);</code><br>ÂØπ‰∫é‰∏Ä‰∏™ÂØπË±°ÊàñËÄÖ‰∏Ä‰∏™Ë°®ËææÂºèÔºåÂ¶ÇÊûúÂèØ‰ª•ÂØπÂÖ∂‰ΩøÁî®Ë∞ÉÁî®ËøêÁÆóÁ¨¶ÔºåÂàôÁß∞ÂÆÉ‰∏∫ÂèØË∞ÉÁî®ÂØπË±°(„Ääc++primer„Äãp345)<br>3.Áî®‰∏ãÊ†áËÆøÈóÆ‰∏Ä‰∏™prvalueÊï∞ÁªÑÊó∂<br><code>((int[])&#123;1, 2&#125;)[0];</code></li>
<li>ÂΩì‰ªéÂ∏¶Êã¨Âè∑ÁöÑÂàóË°®ÂàùÂßãÂåñÂàùÂßãÂåñstd::initializer_list<T>Á±ªÂûãÁöÑÂØπË±°Êó∂;<br>„Ääc++primer„Äãp197</li>
<li>   typid‰ΩúÁî®‰∫é‰∏Ä‰∏™prvalueÊó∂<br>„Ääc++primer„Äãp732</li>
<li>sizeof‰ΩúÁî®‰∫é‰∏Ä‰∏™prvalueÊó∂</li>
<li>ÂΩì‰∏Ä‰∏™prvalueÂá∫Áé∞Âú®‰∏¢ÂºÉÂÄºË°®ËææÂºèÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/expressions#Discarded-value_expressions">Discarded-value expressions</a>Ôºâ<br>‰∏äÊñáÁ†îÁ©∂ÂºÄÂêØRVOÊó∂ËÆ≤Ëøá„ÄÇ</li>
<li>Ê≥®ÊÑèÔºöÂΩì‰ªéÁõ∏ÂêåÁ±ªÂûãÁöÑprvalueÂàùÂßãÂåñ‰∏Ä‰∏™ÂØπË±°Êó∂(ÈÄöËøáÁõ¥Êé•ÂàùÂßãÂåñÊàñÂ§çÂà∂ÂàùÂßãÂåñ)‰∏ç‰ºöÂèëÁîü‰∏¥Êó∂Áâ©Âåñ:ËøôÊ†∑ÁöÑÂØπË±°ÊòØÁõ¥Êé•‰ªéÂàùÂßãÂåñÂô®ÂàùÂßãÂåñÁöÑ„ÄÇËøôÁ°Æ‰øù‰∫Ü‚ÄúÊã∑Ë¥ùÂâØÊú¨ÁöÑÁúÅÁï•(RVOÁöÑÂ∑•‰ΩúÊú∫Âà∂)‚Äù„ÄÇÔºà‰∏äÊñáÁ†îÁ©∂ÂºÄÂêØRVOÊó∂ËÆ≤ËøáÔºåprvalueÂèØ‰ª•Áî®Êù•ÂàùÂßãÂåñ‰∏Ä‰∏™ÂØπË±°ÔºåËøôÁßçprvalueË¢´Áß∞‰∏∫‚ÄùÊúâ‰∏Ä‰∏™ÁªìÊûúÂØπË±°‚ÄùÔºà<a target="_blank" rel="noopener" href="https://en.cppreference.com/w/cpp/language/value_category">such prvalue is said to have a result object</a>ÔºâÔºâ<br><img src="/img/00004/18.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></li>
</ul>
<p>ÈáçË¶ÅÁöÑ‰∫ãÊÉÖËØ¥‰∏âÈÅçÔºÅ<br>‰ªé‰∏Ä‰∏™‰ªª‰ΩïÂÆåÊï¥Á±ªÂûãTÁöÑprvalueËΩ¨Êç¢‰∏∫Áõ∏ÂêåÁ±ªÂûãTÁöÑxvalueÁöÑËøáÁ®ãË¢´Áß∞‰∏∫‰∏¥Êó∂Áâ©Âåñ<br>‰ªé‰∏Ä‰∏™‰ªª‰ΩïÂÆåÊï¥Á±ªÂûãTÁöÑprvalueËΩ¨Êç¢‰∏∫Áõ∏ÂêåÁ±ªÂûãTÁöÑxvalueÁöÑËøáÁ®ãË¢´Áß∞‰∏∫‰∏¥Êó∂Áâ©Âåñ<br>‰ªé‰∏Ä‰∏™‰ªª‰ΩïÂÆåÊï¥Á±ªÂûãTÁöÑprvalueËΩ¨Êç¢‰∏∫Áõ∏ÂêåÁ±ªÂûãTÁöÑxvalueÁöÑËøáÁ®ãË¢´Áß∞‰∏∫‰∏¥Êó∂Áâ©Âåñ</p>
</blockquote>
<hr>
<h1 id="ÂºïÁî®ÊäòÂè†Ôºà‰∏áËÉΩÂºïÁî®ÔºåÂºïÁî®Â°åÁº©Ôºâ"><a href="#ÂºïÁî®ÊäòÂè†Ôºà‰∏áËÉΩÂºïÁî®ÔºåÂºïÁî®Â°åÁº©Ôºâ" class="headerlink" title="ÂºïÁî®ÊäòÂè†Ôºà‰∏áËÉΩÂºïÁî®ÔºåÂºïÁî®Â°åÁº©Ôºâ"></a>ÂºïÁî®ÊäòÂè†Ôºà‰∏áËÉΩÂºïÁî®ÔºåÂºïÁî®Â°åÁº©Ôºâ</h1><blockquote>
<p>‰∏äÈù¢ËØ¥ËøáÁßªÂä®Êìç‰ΩúÁöÑÂá∫Áé∞ÊèêÈ´ò‰∫ÜÁ±ªÂÜÖÂ≠òËΩ¨ËÆ©ÁöÑÊïàÁéáÔºåËÄåÊîØÊâøËøô‰∏ÄÊäÄÊúØÁöÑÂü∫Á°ÄÂ∞±ÊòØprvalue,xvalue,lvalue„ÄÇ‰ΩÜÂè≥ÂÄºÂºïÁî®ÊâçÊòØÁßªÂä®Êìç‰ΩúËÉΩÂÆûÁé∞ÁöÑÊ†πÊú¨ÂéüÂõ†„ÄÇËøôÈáåÂí±‰ª¨Â•ΩÂ•ΩËÆ≤‰∏ÄËÆ≤Âè≥ÂÄºÂºïÁî®ÁöÑÁõ∏ÂÖ≥Áü•ËØÜÂºïÁî®ÊäòÂè†ÔºàÂÖ≥‰∫éÂè≥ÂÄºÂºïÁî®ÁöÑÂü∫Á°ÄÁü•ËØÜËØ∑ÂèÇÁúã„Ääc++primer„Äãp471ËøôÈáå‰∏çÂ§öËµòËø∞Ôºâ„ÄÇ<br>ÂºïÁî®ÊäòÂè†ÁöÑ‰∏§‰∏™ËßÑÂàôË¢´Áß∞‰∏∫C++ËØ≠Ë®ÄÂú®Ê≠£Â∏∏ÁªëÂÆöËßÑÂàô‰πãÂ§ñÂÆö‰πâÁöÑ‰∏§‰∏™‰æãÂ§ñËßÑÂàôÔºåÂÖÅËÆ∏ËøôÁßçÁªëÂÆö„ÄÇËÄåËøô‰∏§‰∏™‰æãÂ§ñËßÑÂàôÊòØmoveËøôÁßçÊ†áÂáÜÊ®°ÊùøÂ∫ìËÆæÊñΩÊ≠£Á°ÆÂ∑•‰ΩúÁöÑÂü∫Á°Ä„ÄÇ<br>ÂÖà‰ªãÁªç‰∏Ä‰∏ãÂÆÉÁöÑ‰∏§‰∏™ËßÑÂàôÔºö</p>
<ul>
<li>.ËßÑÂàô‰∏ÄÔºöÂØπ‰∫é‰∏Ä‰∏™ÁªôÂÆöÁ±ªÂûã<code>T</code>ÔºåÂΩìÊàë‰ª¨Â∞Ü‰∏Ä‰∏™Â∑¶ÂÄº‰º†ÁªôÊ®°ÊùøÂáΩÊï∞ÁöÑÂè≥ÂÄºÂºïÁî®ÂèÇÊï∞Êó∂ÔºåÁºñËØëÂô®Êé®Êñ≠Ê®°ÊùøÁ±ªÂûãÂèÇÊï∞T‰∏∫Â∑¶ÂÄºÂºïÁî®Á±ªÂûãÔºàT&amp;ÔºâÔºå‰æãÂ¶ÇÂØπ‰∫é<code>int</code>Á±ªÂûãÁöÑÂ∑¶ÂÄºÊó∂ÔºåÊé®Êñ≠<code>T</code>‰∏∫<code>int&amp;</code>ÔºõÂΩìÊàë‰ª¨Â∞Ü‰∏Ä‰∏™Âè≥ÂÄº‰º†ËøõÂéªÊó∂Ôºå<code>T</code>Ë¢´Êé®Êñ≠Âá∫Êù•ÁöÑÁ±ªÂûã‰∏∫<code>T</code>Ôºå‰æãÂ¶ÇÂØπ‰∫é<code>int</code>Á±ªÂûãÁöÑÂè≥ÂÄºÊó∂ÔºåÊé®Êñ≠<code>T</code>‰∏∫<code>int</code>„ÄÇ</li>
<li>‰æãÂ§ñËßÑÂàô‰∫åÔºöÂ¶ÇÊûúÊàë‰ª¨Èó¥Êé•ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂºïÁî®ÁöÑÂºïÁî®ÔºåÂàôËøô‰∫õÂºïÁî®ÂΩ¢Êàê‰∫ÜÂºïÁî®ÊäòÂè†„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºå‰∏çËÉΩÁõ¥Êé•ÂàõÂª∫ÂºïÁî®ÁöÑÂºïÁî®Ôºå‰ΩÜÊòØÂèØ‰ª•Èó¥Êé•ÂàõÂª∫ÔºàÂ¶ÇÁ±ªÂûãÂà´ÂêçÂíåÊ®°ÊùøÂèÇÊï∞Ôºâ„ÄÇÂ§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÔºåÂºïÁî®ÁöÑÂºïÁî®‰ºöÊäòÂè†‰∏∫ÊôÆÈÄöÁöÑÂ∑¶ÂÄºÂºïÁî®ÔºàT&amp; &amp;„ÄÅT&amp; &amp;&amp;„ÄÅ T&amp;&amp; &amp;ÈÉΩ‰ºöÊäòÂè†ÊàêÁ±ªÂûãT&amp;ÔºâÔºåÂè≥ÂÄºÂºïÁî®ÂíåÂè≥ÂÄºÂºïÁî®ÔºåÂàôÊäòÂè†ÊàêÂè≥ÂÄºÂºïÁî®ÔºàT&amp;&amp; &amp;&amp;ÊäòÂè†ÊàêT&amp;&amp;Ôºâ„ÄÇ„Ääc++primer„Äãp608</li>
</ul>
</blockquote>
<hr>
<h2 id="ÂØπ‰∏äÈù¢‰∏§‰∏™ËßÑÂàôÁÜüÁªÉÂêéÔºåÊàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ãÊ†áÂáÜÂ∫ìmoveÂáΩÊï∞"><a href="#ÂØπ‰∏äÈù¢‰∏§‰∏™ËßÑÂàôÁÜüÁªÉÂêéÔºåÊàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ãÊ†áÂáÜÂ∫ìmoveÂáΩÊï∞" class="headerlink" title="ÂØπ‰∏äÈù¢‰∏§‰∏™ËßÑÂàôÁÜüÁªÉÂêéÔºåÊàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ãÊ†áÂáÜÂ∫ìmoveÂáΩÊï∞:"></a>ÂØπ‰∏äÈù¢‰∏§‰∏™ËßÑÂàôÁÜüÁªÉÂêéÔºåÊàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ãÊ†áÂáÜÂ∫ìmoveÂáΩÊï∞:</h2><blockquote>
<p>ËôΩÁÑ∂‰∏çËÉΩÁõ¥Êé•Â∞Ü‰∏Ä‰∏™Âè≥ÂÄºÂºïÁî®ÁªëÂÆöÂà∞‰∏Ä‰∏™Â∑¶ÂÄº‰∏äÔºå‰ΩÜÂèØ‰ª•Áî®moveËé∑Âæó‰∏Ä‰∏™ÁªëÂÆöÂà∞Â∑¶ÂÄº‰∏äÁöÑxvalue„ÄÇÁî±‰∫émoveÊú¨Ë¥®‰∏äÂèØ‰ª•Êé•Âèó‰ªª‰ΩïÁ±ªÂûãÁöÑÂÆûÂèÇÔºåÂõ†Ê≠§Êàë‰ª¨‰∏ç‰ºöÊÉäËÆ∂‰∫é‰ªñ‰∏Ä‰∏™ÂáΩÊï∞Ê®°Êùø„ÄÇ</p>
<ul>
<li>std::moveÊòØÂ¶Ç‰ΩïÂÆö‰πâÁöÑ<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp">&gt;<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br>&gt;<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">typename</span> std::remove_reference&lt;T&gt;::type&amp;&amp;<br>&gt;<span class="hljs-built_in">move</span>(T&amp;&amp; t) <span class="hljs-keyword">noexcept</span><br>&gt;&#123; <br>&gt;<span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">typename</span> std::remove_reference&lt;T&gt;::type&amp;&amp;&gt;(t); <br>&gt;&#125;<br></code></pre></td></tr></table></figure>
Âú®ËøîÂõûÁ±ªÂûãÂíåÁ±ªÂûãËΩ¨Êç¢‰∏≠‰πüË¶ÅÁî®Âà∞<code>typename</code>Ôºà„Ääc++primer„Äãp593Ôºâ„ÄÇ<code>std::remove_reference&lt;T&gt;::type</code>ÁöÑÁî®Â§ÑÂ∞±ÊòØÂéªÈô§Á±ªÂûãÁöÑÂºïÁî®Ôºà„Ääc++primer„Äãp605Ôºâ„ÄÇ<code>static_cast</code>ÈùôÊÄÅÁ±ªÂûãËΩ¨Êç¢Ôºà„Ääc++primer„Äãp145Ôºâ„ÄÇ</li>
<li>std::moveÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ</li>
</ul>
<p>ËøôÊÆµ‰ª£Á†ÅÂæàÁü≠Ôºå‰ΩÜÂÖ∂‰∏≠Êúâ‰∫õÂæÆÂ¶ô‰πãÂ§Ñ„ÄÇÈ¶ñÂÖàÔºåmoveÁöÑÂáΩÊï∞ÂèÇÊï∞<code>T&amp;&amp;</code>ÊòØ‰∏Ä‰∏™ÊåáÂêëÊ®°ÊùøÁ±ªÂûãÂèÇÊï∞ÁöÑÂè≥ÂÄºÂºïÁî®„ÄÇÈÄöËøáÂºïÁî®ÊäòÂè†ÔºåÊ≠§ÂèÇÊï∞ÂèØ‰ª•‰∏é‰ªª‰ΩïÁ±ªÂûãÁöÑÂÆûÂèÇÂåπÈÖç„ÄÇÁâπÂà´ÊòØÔºåÊàë‰ª¨Êó¢ÂèØ‰ª•‰º†ÈÄíÁªômove‰∏Ä‰∏™Â∑¶ÂÄºÔºå‰πüÂèØ‰ª•‰º†ÈÄíÁªôÂÆÉ‰∏Ä‰∏™Âè≥ÂÄº:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">&gt;<span class="hljs-function">string <span class="hljs-title">s1</span> <span class="hljs-params">( <span class="hljs-string">&quot;hi! &quot;</span>)</span>,s2</span>;<br>&gt;s2 = std::<span class="hljs-built_in">move</span> (<span class="hljs-built_in">string</span> ( <span class="hljs-string">&quot;bye!&quot;</span>) );<span class="hljs-comment">//Ê≠£Á°Æ:‰ªé‰∏Ä‰∏™Âè≥ÂÄºÁßªÂä®Êï∞ÊçÆ</span><br>&gt;s2 = std::<span class="hljs-built_in">move</span>(s1);<span class="hljs-comment">//Ê≠£Á°Æ:‰ΩÜÂú®ËµãÂÄº‰πãÂêéÔºås1ÁöÑÂÄºÊòØ‰∏çÁ°ÆÂÆöÁöÑ(ÂÜÖÂÆπË¢´ÁßªÂä®ËµãÂÄºËøêÁÆóÁ¨¶ÁßªÂä®Ëøá)„ÄÇ</span><br></code></pre></td></tr></table></figure>
<p>Âú®Á¨¨‰∏Ä‰∏™ËµãÂÄº‰∏≠Ôºå‰º†ÈÄíÁªômoveÁöÑÂÆûÂèÇÊòØstringÁöÑÊûÑÈÄ†ÂáΩÊï∞ÁöÑÂè≥ÂÄºÁªìÊûú„ÄÇÂú®<code>std::move(string(&quot;bye!&quot;))</code>‰∏≠:</p>
<ol>
<li>Êé®Êñ≠Âá∫ÁöÑTÁöÑÁ±ªÂûã‰∏∫string„ÄÇ</li>
<li>Âõ†Ê≠§remove_referenceÁî®stringËøõË°åÂÆû‰æãÂåñ„ÄÇ</li>
<li>remove_reference<string>ÁöÑtypeÊàêÂëòÊòØstring„ÄÇ</li>
<li>moveÁöÑËøîÂõûÁ±ªÂûãÊòØstring&amp;&amp;„ÄÇ</li>
<li>moveÁöÑÂáΩÊï∞ÂèÇÊï∞tÁöÑÁ±ªÂûã‰∏∫string&amp;&amp;„ÄÇ</li>
</ol>
<p>Âõ†Ê≠§ÔºåËøô‰∏™Ë∞ÉÁî®ÂÆû‰æãÂåñmove<string>ÔºåÂç≥ÂáΩÊï∞<br><code>string&amp;&amp; move(string &amp;&amp;t)</code></p>
<p>ÂáΩÊï∞‰ΩìËøîÂõû<code>static_cast&lt;string&amp;&amp;&gt;(t)</code>„ÄÇ<code>t</code>ÁöÑÁ±ªÂûãÂ∑≤ÁªèÊòØ<code>string&amp;&amp;</code>,‰∫éÊòØÁ±ªÂûãËΩ¨Êç¢‰ªÄ‰πàÈÉΩ‰∏çÂÅö„ÄÇÂõ†Ê≠§ÔºåÊ≠§Ë∞ÉÁî®ÁöÑÁªìÊûúÂ∞±ÊòØÂÆÉÊâÄÊé•ÂèóÁöÑÂè≥ÂÄºÂºïÁî®ÔºàËøîÂõûÂÄº‰∏∫Âè≥ÂÄºÂºïÁî®Á±ªÂûãÊúâ‰∏¥Êó∂ÂØπË±°‰∫ßÁîüÔºâ„ÄÇ<br>.<br>.Áé∞Âú®ËÄÉËôëÁ¨¨‰∫å‰∏™ËµãÂÄºÔºåÂÆÉË∞ÉÁî®‰∫Ü<code>std::move ()</code>„ÄÇÂú®Ê≠§Ë∞ÉÁî®‰∏≠Ôºå‰º†ÈÄíÁªômoveÁöÑÂÆûÂèÇÊòØ‰∏Ä‰∏™Â∑¶ÂÄº„ÄÇËøôÊ†∑:</p>
<ol>
<li>Êé®Êñ≠Âá∫ÁöÑTÁöÑÁ±ªÂûã‰∏∫string&amp; (string ÁöÑÂºïÁî®ÔºåËÄåÈùûÊôÆÈÄöstring)„ÄÇ</li>
<li>Âõ†Ê≠§Ôºåremove referenceÁî®string&amp;ËøõË°åÂÆû‰æãÂåñ„ÄÇ</li>
<li>remove reference&lt;string&amp;&gt;ÁöÑtypeÊàêÂëòÊòØstring„ÄÇ</li>
<li>moveÁöÑËøîÂõûÁ±ªÂûã‰ªçÊòØstring&amp;&amp; „ÄÇ</li>
<li>moveÁöÑÂáΩÊï∞ÂèÇÊï∞tÂÆû‰æãÂåñ‰∏∫string&amp; &amp;&amp;Ôºå‰ºöÊäòÂè†‰∏∫string&amp;„ÄÇ</li>
</ol>
<p>Âõ†Ê≠§ÔºåËøô‰∏™Ë∞ÉÁî®ÂÆû‰æãÂåñ<code>move&lt;string&amp;&gt;</code>ÔºåÂç≥<br><code>string&amp;&amp;  move(string &amp;t)</code><br>ËøôÊ≠£ÊòØÊàë‰ª¨ÊâÄÂØªÊ±ÇÁöÑ‚ÄîÊàë‰ª¨Â∏åÊúõÂ∞Ü‰∏Ä‰∏™Âè≥ÂÄºÂºïÁî®ÁªëÂÆöÂà∞‰∏Ä‰∏™Â∑¶ÂÄº„ÄÇËøô‰∏™ÂÆû‰æãÁöÑÂáΩÊï∞‰ΩìËøîÂõû<code>static_cast&lt;string&amp;&amp;&gt;(t)</code>„ÄÇÂú®Ê≠§ÊÉÖÂÜµ‰∏ãÔºå<code>t</code>ÁöÑÁ±ªÂûã‰∏∫<code>string&amp;</code>ÔºåcastÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫<code>string&amp;&amp;</code>(Âº∫ËΩ¨‰º¥Èöè‰∏¥Êó∂ÂØπË±°xvalueÁöÑ‰∫ßÁîüÂÖ∂Á©∫Èó¥Âú∞ÂùÄ‰∏é<code>std::move()</code>ÂáΩÊï∞‰∫ßÁîüÁöÑ‰∏¥Êó∂ÂØπË±°xvalueÁöÑÁ©∫Èó¥Âú∞ÂùÄÁõ∏Âêå)„ÄÇ<br><img src="/img/00004/19.png" srcset="/img/loading.gif" lazyload alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"><br>Â∞ÜÂè≥ÂÄºÂºïÁî®ÁªëÂÆöÂà∞‰∏Ä‰∏™Ë¢´Âº∫ËΩ¨ÊàêxvalueÁöÑÂ∑¶ÂÄºÔºåËøô‰∏ÄÁâπÊÄßË¢´Áß∞‰∏∫Êà™Êñ≠„ÄÇÔºà„Ääc++primer„Äãp612Ôºâ</p>
<h3 id="std-move-ÂáΩÊï∞ÊÄªÁªì"><a href="#std-move-ÂáΩÊï∞ÊÄªÁªì" class="headerlink" title="std::move()ÂáΩÊï∞ÊÄªÁªì"></a>std::move()ÂáΩÊï∞ÊÄªÁªì</h3><p>ËØ¥ÁôΩ‰∫Ü<code>std::move()</code>ÂáΩÊï∞Â∞±ÊòØÂ∞Ü‰∏Ä‰∏™prvalueÊàñËÄÖlvalueËΩ¨ÂèòÊàêxvalueÁöÑËøáÁ®ãÔºåËøôÊ†∑‰∏çÁÆ°ÊòØprvalueËøòÊòØlvalueÈÉΩÂèØ‰ª•Ë¢´Âè≥ÂÄºÂºïÁî®Êé•Âèó„ÄÇ</p>
</blockquote>
<hr>
<h2 id="Êé•‰∏ãÊù•Âí±‰ª¨Êù•ÂàÜÊûêÊ†áÂáÜÂ∫ìforwardÂáΩÊï∞"><a href="#Êé•‰∏ãÊù•Âí±‰ª¨Êù•ÂàÜÊûêÊ†áÂáÜÂ∫ìforwardÂáΩÊï∞" class="headerlink" title="Êé•‰∏ãÊù•Âí±‰ª¨Êù•ÂàÜÊûêÊ†áÂáÜÂ∫ìforwardÂáΩÊï∞:"></a>Êé•‰∏ãÊù•Âí±‰ª¨Êù•ÂàÜÊûêÊ†áÂáÜÂ∫ìforwardÂáΩÊï∞:</h2><blockquote>
<p>Âú®ÂàÜÊûêforwardÊ∫êÁ†Å‰πãÂâçÔºåÂí±‰ª¨ÂÖàÊù•ÁúãÁúãforwardÂÆåÊàê‰∫Ü‰∏Ä‰∏™‰ªÄ‰πàÊ†∑ÁöÑÂäüËÉΩ„ÄÇ<br>Êàë‰ª¨Áü•ÈÅìÊüê‰∫õÂáΩÊï∞ÈúÄË¶ÅÂ∞ÜÂÖ∂‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂÆûÂèÇËøûÂêåÁ±ªÂûã‰∏çÂèòÂú∞ËΩ¨ÂèëÁªôÂÖ∂‰ªñÂáΩÊï∞„ÄÇÂú®Ê≠§ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÈúÄË¶Å‰øùÊåÅË¢´ËΩ¨ÂèëÂÆûÂèÇÁöÑÊâÄÊúâÊÄßË¥®,ÂåÖÊã¨ÂÆûÂèÇÁ±ªÂûãÊòØÂê¶ÊòØ<code>const</code>ÁöÑ‰ª•ÂèäÂÆûÂèÇÊòØÂ∑¶ÂÄºËøòÊòØÂè≥ÂÄº„ÄÇ<br>‰Ωú‰∏∫‰∏Ä‰∏™‰æãÂ≠êÔºåÊàë‰ª¨Â∞ÜÁºñÂÜô‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂÆÉÊé•Âèó‰∏Ä‰∏™ÂèØË∞ÉÁî®Ë°®ËææÂºèÂíå‰∏§‰∏™È¢ùÂ§ñÂÆûÂèÇ„ÄÇÊàë‰ª¨ÁöÑÂáΩÊï∞Â∞ÜË∞ÉÁî®ÁªôÂÆöÁöÑÂèØË∞ÉÁî®ÂØπË±°ÔºåÂ∞Ü‰∏§‰∏™È¢ùÂ§ñÂèÇÊï∞ÈÄÜÂ∫è‰º†ÈÄíÁªôÂÆÉ„ÄÇ‰∏ãÈù¢ÊòØÊàë‰ª¨ÁöÑÁøªËΩ¨ÂáΩÊï∞ÁöÑÊ®°Ê†∑:</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//Êé•Âèó‰∏Ä‰∏™ÂèØË∞ÉÁî®ÂØπË±°ÂíåÂè¶Â§ñ‰∏§‰∏™ÂèÇÊï∞ÁöÑÊ®°Êùø</span><br><span class="hljs-comment">//ÂØπ‚ÄúÁøªËΩ¨‚ÄùÁöÑÂèÇÊï∞Ë∞ÉÁî®ÁªôÂÆöÁöÑÂèØË∞ÉÁî®ÂØπË±°</span><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> F, <span class="hljs-keyword">typename</span> T1,<span class="hljs-keyword">typename</span> T2&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">flip2</span><span class="hljs-params">(F f,T1 &amp;&amp;t1,T2 &amp;&amp;t2)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">f</span> (t2,t1);<br>)<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">int</span> v1,<span class="hljs-type">int</span> &amp;v2)</span></span><br><span class="hljs-function"></span>&#123;<br>	std::cout &lt;&lt; v1 &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; ++v2 &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞ÂèÇÊï∞ÂÆö‰πâ‰∏∫‰∏Ä‰∏™ÊåáÂêëÊ®°ÊùøÁ±ªÂûãÂèÇÊï∞ÁöÑÂè≥ÂÄºÂºïÁî®ÔºåÊàë‰ª¨ÂèØ‰ª•‰øùÊåÅÂÖ∂ÂØπÂ∫îÂÆûÂèÇÁöÑÊâÄÊúâÁ±ªÂûã‰ø°ÊÅØ„ÄÇËÄå‰ΩøÁî®ÂºïÁî®ÂèÇÊï∞(Êó†ËÆ∫ÊòØÂ∑¶ÂÄºËøòÊòØÂè≥ÂÄº)‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•‰øùÊåÅ<code>const</code>Â±ûÊÄßÔºåÂõ†‰∏∫Âú®ÂºïÁî®Á±ªÂûã‰∏≠ÁöÑ<code>const</code>ÊòØÂ∫ïÂ±ÇÁöÑ„ÄÇÂ¶ÇÊûúÊàë‰ª¨Â∞ÜÂáΩÊï∞ÂèÇÊï∞ÂÆö‰πâ‰∏∫<code>T1&amp;&amp;</code>Âíå<code>T2&amp;&amp;</code>, ÈÄöËøáÂºïÁî®ÊäòÂè†ÔºåÂ∞±ÂèØ‰ª•‰øùÊåÅÁøªËΩ¨ÂêéÂÆûÂèÇÁöÑÂ∑¶ÂÄº&#x2F;Âè≥ÂÄºÂ±ûÊÄßÔºàÂØπÂ∫îÂÆûÂèÇÁöÑ<code>const</code>Â±ûÊÄßÂíåÂ∑¶ÂÄº&#x2F;Âè≥ÂÄºÂ±ûÊÄßÂ∞ÜÂæóÂà∞‰øùÊåÅÔºâ:<br>‰æãÂ¶ÇÔºåÂ¶ÇÊûúÊàë‰ª¨Ë∞ÉÁî®<code>flip2(fÔºåjÔºå42)</code>ÔºåÂ∞Ü‰º†ÈÄíÁªôÂèÇÊï∞<code>t1</code>‰∏Ä‰∏™Â∑¶ÂÄº<code>j</code>„ÄÇ‰ΩÜÊòØÔºåÂú®<code>flip2</code>‰∏≠ÔºåÊé®Êñ≠Âá∫ÁöÑ<code>T1</code>ÁöÑÁ±ªÂûã‰∏∫<code>int&amp;</code>ÔºåËøôÊÑèÂë≥ÁùÄ<code>t1</code>ÁöÑÁ±ªÂûã‰ºöÊäòÂè†‰∏∫<code>int&amp;</code>„ÄÇÁî±‰∫éÊòØÂºïÁî®Á±ªÂûãÔºå<code>t1</code>Ë¢´ÁªëÂÆöÂà∞<code>j</code>‰∏ä„ÄÇÂΩì<code>flip2</code>Ë∞ÉÁî®<code>f</code>Êó∂Ôºå<code>f</code>‰∏≠ÁöÑÂºïÁî®ÂèÇÊï∞<code>v2</code>Ë¢´ÁªëÂÆöÂà∞<code>t1</code>Ôºå‰πüÂ∞±ÊòØË¢´ÁªëÂÆöÂà∞<code>j</code>„ÄÇÂΩì<code>f</code>ÈÄíÂ¢û<code>v2</code>Êó∂ÔºåÂÆÉ‰πüÂêåÊó∂ÊîπÂèò‰∫Ü<code>j</code>ÁöÑÂÄº„ÄÇ<br>.<br>Áé∞Âú®ÔºåÂí±‰ª¨‰∏çÁî®ÂèØË∞ÉÁî®ÂØπË±°<code>f</code>ÔºåÁî®<code>g</code>„ÄÇ</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//Êé•Âèó‰∏Ä‰∏™ÂèØË∞ÉÁî®ÂØπË±°ÂíåÂè¶Â§ñ‰∏§‰∏™ÂèÇÊï∞ÁöÑÊ®°Êùø</span><br><span class="hljs-comment">//ÂØπ‚ÄúÁøªËΩ¨‚ÄùÁöÑÂèÇÊï∞Ë∞ÉÁî®ÁªôÂÆöÁöÑÂèØË∞ÉÁî®ÂØπË±°</span><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> F, <span class="hljs-keyword">typename</span> T1,<span class="hljs-keyword">typename</span> T2&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">flip2</span><span class="hljs-params">(F f,T1 &amp;&amp;t1,T2 &amp;&amp;t2)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">g</span>(t2,t1);<br>)<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">g</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;&amp;i, <span class="hljs-type">int</span>&amp; j)</span></span><br><span class="hljs-function"></span>&#123;<br>	std::cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; j &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>Â¶ÇÊûúÊàë‰ª¨ËØïÂõæÈÄöËøá<code>flip2</code>Ë∞ÉÁî®<code>g</code>ÔºåÂàôÂèÇÊï∞<code>t2</code>Â∞ÜË¢´‰º†ÈÄíÁªô<code>g</code>ÁöÑÂè≥ÂÄºÂºïÁî®ÂèÇÊï∞„ÄÇÂç≥‰ΩøÊàë‰ª¨‰º†ÈÄí‰∏Ä‰∏™Âè≥ÂÄºÁªô<code>flip2</code>:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">flip2</span>(g, iÔºå<span class="hljs-number">42</span>);<span class="hljs-comment">//ÈîôËØØ:‰∏çËÉΩ‰ªé‰∏Ä‰∏™Â∑¶ÂÄºÂÆû‰æãÂåñint&amp;&amp;</span><br></code></pre></td></tr></table></figure>
<p>‰º†ÈÄíÁªô<code>g </code>ÁöÑÂ∞ÜÊòØ<code>flip2</code>‰∏≠Âêç‰∏∫<code>t2</code>ÁöÑÂèÇÊï∞„ÄÇÂáΩÊï∞ÂèÇÊï∞‰∏éÂÖ∂‰ªñ‰ªª‰ΩïÂèòÈáè‰∏ÄÊ†∑ÔºåÈÉΩÊòØÂ∑¶ÂÄºË°®ËææÂºè„ÄÇÂõ†Ê≠§Ôºå<code>flip2</code>‰∏≠ÂØπ <code>g</code>ÁöÑË∞ÉÁî®Â∞Ü‰º†ÈÄíÁªô<code>g</code>ÁöÑÂè≥ÂÄºÂºïÁî®ÂèÇÊï∞‰∏Ä‰∏™Â∑¶ÂÄº„ÄÇ<br>.<br>Âú®Ë∞ÉÁî®‰∏≠‰ΩøÁî®<code>std::forward</code>‰øùÊåÅÁ±ªÂûã‰ø°ÊÅØ<br>.<br>Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™Âêç‰∏∫forward ÁöÑÊñ∞Ê†áÂáÜÂ∫ìËÆæÊñΩÊù•‰º†ÈÄí<code>flip2</code>ÁöÑÂèÇÊï∞,ÂÆÉËÉΩ‰øùÊåÅÂéüÂßãÂÆûÂèÇÁöÑÁ±ªÂûã„ÄÇÁ±ª‰ººmove,forwardÂÆö‰πâÂú®Â§¥Êñá‰ª∂utility‰∏≠„ÄÇ‰∏émove‰∏çÂêå,forwardÂøÖÈ°ªÈÄöËøáÊòæÂºèÊ®°ÊùøÂÆûÂèÇÊù•Ë∞ÉÁî®„ÄÇforwardËøîÂõûËØ•ÊòæÂºèÂÆûÂèÇÁ±ªÂûãÁöÑÂè≥ÂÄºÂºïÁî®„ÄÇÂç≥Ôºå<code>forward&lt;T&gt;</code>ÁöÑËøîÂõûÁ±ªÂûãÊòØ<code>T&amp;&amp;</code>„ÄÇ<br>ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ΩøÁî®forward‰º†ÈÄíÈÇ£‰∫õÂÆö‰πâ‰∏∫Ê®°ÊùøÁ±ªÂûãÂèÇÊï∞ÁöÑÂè≥ÂÄºÂºïÁî®ÁöÑÂáΩÊï∞ÂèÇÊï∞„ÄÇÈÄöËøáÂÖ∂ËøîÂõûÁ±ªÂûã‰∏äÁöÑÂºïÁî®ÊäòÂè†ÔºåforwardÂèØ‰ª•‰øùÊåÅÁªôÂÆöÂÆûÂèÇÁöÑÂ∑¶ÂÄº&#x2F;Âè≥ÂÄºÂ±ûÊÄß(forwardÂèØ‰ª•‰øùÊåÅÂÆûÂèÇÁ±ªÂûãÁöÑÊâÄÊúâÁªÜËäÇ)„ÄÇ<br>‰ΩøÁî®forwardÔºåÊàë‰ª¨ÂèØ‰ª•ÂÜçÊ¨°ÈáçÂÜôÁøªËΩ¨ÂáΩÊï∞:</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> F,<span class="hljs-keyword">typename</span> T1,<span class="hljs-keyword">typename</span> T2&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">flip</span><span class="hljs-params">(F f,T1 &amp;&amp;t1,T2 &amp;&amp;t2)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">g</span>(std::forward&lt;T2&gt;(t2),std::forward&lt;T1&gt;(t1)) ;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">g</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;&amp;i, <span class="hljs-type">int</span>&amp; j)</span></span><br><span class="hljs-function"></span>&#123;<br>	std::cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; j &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>Â¶ÇÊûúÊàë‰ª¨Ë∞ÉÁî®<code>flip(g, iÔºå42)</code>Ôºå<code>i</code>Â∞Ü‰ª•<code>int&amp;</code>Á±ªÂûã‰º†ÈÄíÁªô<code>g</code>Ôºå<code>42</code>Â∞Ü‰ª•<code>int&amp;&amp;</code>Á±ªÂûãÁöÑ<code>xvalue</code>‰º†ÈÄíÁªô<code>g</code>„ÄÇÔºàprimerÊ≤°ËØ¥Ê∏ÖÊ•öÔºåÂçïÁ∫ØÂõ†‰∏∫42ÊòØint&amp;&amp;Á±ªÂûãÊòØÊó†Ê≥ï‰º†ÁªôÂèØË∞ÉÁî®ÂØπË±°g„ÄÇlvalueÂèØ‰ª•ÊòØint&amp;&amp;Á±ªÂûãÔºåxvalue‰πüÂèØ‰ª•ÊòØint&amp;&amp;Á±ªÂûãÔºå‰ΩÜÊòØlvalue‰∏çËÉΩ‰º†ÁªôÂè≥ÂÄºÂºïÁî®ÔºåËÄåxvalueÂèØ‰ª•„ÄÇÔºâ</p>
</blockquote>
<hr>
<blockquote>
<p>Áé∞Âú®Âí±‰ª¨Áü•ÈÅìforwardÊòØÂπ≤‰ªÄ‰πàÁöÑ‰∫Ü„ÄÇÂ∫üËØù‰∏çÂ§öËØ¥Áõ¥Êé•ÂàÜÊûêÂÆÉÁöÑÊ∫êÁ†ÅÔºåÁúãÁúãÂÆÉÂ¶Ç‰Ωï‰øùÊåÅÂÆûÂèÇÁ±ªÂûãÁöÑÊâÄÊúâÁªÜËäÇ„ÄÇ</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt;</span><br><span class="hljs-function"><span class="hljs-keyword">constexpr</span> _Tp&amp;&amp;</span><br><span class="hljs-function"><span class="hljs-title">forward</span><span class="hljs-params">(<span class="hljs-keyword">typename</span> std::remove_reference&lt;_Tp&gt;::type&amp; <span class="hljs-type">_t</span>)</span> <span class="hljs-keyword">noexcept</span></span><br><span class="hljs-function"></span>&#123; <br>	<span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;_Tp&amp;&amp;&gt;(<span class="hljs-type">_t</span>); <br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt;</span><br><span class="hljs-function"><span class="hljs-keyword">constexpr</span> _Tp&amp;&amp;</span><br><span class="hljs-function"><span class="hljs-title">forward</span><span class="hljs-params">(<span class="hljs-keyword">typename</span> std::remove_reference&lt;_Tp&gt;::type&amp;&amp; <span class="hljs-type">_t</span>)</span> <span class="hljs-keyword">noexcept</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">static_assert</span>(!std::is_lvalue_reference&lt;_Tp&gt;::value, <span class="hljs-string">&quot;template argument&quot;</span><br>		    <span class="hljs-string">&quot; substituting _Tp is an lvalue reference type&quot;</span>);    <br>	<span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;_Tp&amp;&amp;&gt;(<span class="hljs-type">_t</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p><code>std::forward</code>Êúâ‰∏§‰∏™ÁâàÊú¨ÁöÑÈáçËΩΩÔºå‰∏Ä‰∏™Áî®‰∫éÂ∑¶ÂÄº‰∏Ä‰∏™Áî®‰∫éÂè≥ÂÄº„ÄÇ‰∏çËøáÂí±‰ª¨‰∏ÄËà¨Áî®ÁöÑÊòØÁ¨¨‰∏Ä‰∏™ÁâàÊú¨ÔºåÂõ†‰∏∫Áî®Âú®ÂΩ¢ÂèÇ‰∏äÔºåÂΩ¢ÂèÇ‰∏çÁÆ°ÊÄé‰πàÊ†∑ÈÉΩÊòØ‰∏™Â∑¶ÂÄº„ÄÇÈÇ£Êàë‰ª¨Â∞±Âè™ÂàÜÊûêÁ¨¨‰∏Ä‰∏™ÁâàÊú¨ÁöÑÊÉÖÂÜµÔºö</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> F,<span class="hljs-keyword">typename</span> T1,<span class="hljs-keyword">typename</span> T2&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">flip</span><span class="hljs-params">(F f,T1 &amp;&amp;t1,T2 &amp;&amp;t2)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-built_in">g</span>(std::forward&lt;T2&gt;(t2),std::forward&lt;T1&gt;(t1)) ;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">g</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;&amp;i, <span class="hljs-type">int</span>&amp; j)</span></span><br><span class="hljs-function"></span>&#123;<br>	std::cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; j &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>Â∞±Êãø‰∏äÈù¢Ëøô‰∏™‰æãÂ≠êÊù•ËØ¥ÔºåÂ¶ÇÊûúÊàë‰ª¨Ë∞ÉÁî®<code>flip(g, iÔºå42)</code>„ÄÇ<br><code>T2</code>Â∞ÜË¢´Êé®ÂØºÊàê<code>int</code>Ôºå<code>t2</code>ÁöÑÁ±ªÂûã‰∏∫<code>int&amp;&amp;</code>„ÄÇË∞ÉÁî®<code>std::forward&lt;T2&gt;(t2)</code>Êó∂ÔºåforwardÂáΩÊï∞Â∞ÜË¢´ÂÆû‰æãÂåñÊàêÔºö</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span>&amp;&amp;</span><br><span class="hljs-function"><span class="hljs-title">forward</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; <span class="hljs-type">_t</span>)</span> <span class="hljs-keyword">noexcept</span></span><br><span class="hljs-function"></span>&#123; <br>   <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&amp;&amp;&gt;(<span class="hljs-type">_t</span>); <br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p><code>_t</code>ÁöÑÁ±ªÂûã‰∏∫<code>int&amp;</code>ÔºåreturnÊó∂<code>_t</code>Ë¢´Âº∫Âà∂ËΩ¨Êç¢Êàê<code>int&amp;&amp;</code>ÔºåÊ≠§Êó∂Âº∫ËΩ¨‰∫ßÁîüÁöÑ<code>xvalue</code>ÂíåforwardÂáΩÊï∞Áî±ËøîÂõûÁ±ªÂûã<code>int&amp;&amp;</code>ËÄå‰∫ßÁîüÁöÑ<code>xvalue</code>Âú®Âêå‰∏ÄÁ©∫Èó¥Âú∞ÂùÄ„ÄÇ<code>xvalue</code>ÂèØ‰ª•Ë¢´ÂáΩÊï∞<code>g</code>ÁöÑÂΩ¢ÂèÇ <code>i </code>ÊâÄÊé•ÂèóÔºåÂÆåÊàê<code>flip</code>ÂÆûÂèÇ<code>42</code>ÁöÑÁ±ªÂûã‰øùÊåÅ„ÄÇ</p>
<p><code>T1</code>Â∞ÜË¢´Êé®ÂØºÊàê<code>int&amp;</code>Ôºå<code>t1</code>ÁöÑÁ±ªÂûãË¢´ÊäòÂè†Êàê<code>int&amp;</code>„ÄÇË∞ÉÁî®<code>std::forward&lt;T1&gt;(t1)</code>Êó∂ÔºåforwardÂáΩÊï∞Â∞ÜË¢´ÂÆû‰æãÂåñÊàêÔºö</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span>&amp;</span><br><span class="hljs-function"><span class="hljs-title">forward</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; <span class="hljs-type">_t</span>)</span> <span class="hljs-keyword">noexcept</span></span><br><span class="hljs-function"></span>&#123; <br>   <span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&amp;&gt;(<span class="hljs-type">_t</span>); <br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>ËøîÂõûÁ±ªÂûãÊäòÂè†Êàê<code>int&amp;</code>„ÄÇ<code>t1</code>‰º†ÂÖ•<code>flip</code>‰∏≠ÊòØÂ∑¶ÂÄºÂºïÁî®‰º†ÂÖ•ÔºåË¢´forwardËΩ¨Êç¢Âêé‰πüÊòØÂ∑¶ÂÄºÂºïÁî®„ÄÇÂÆåÊàêÁ±ªÂûã‰øùÊåÅ„ÄÇ</p>
</blockquote>
<hr>
<h3 id="std-forwardÊÄªÁªì"><a href="#std-forwardÊÄªÁªì" class="headerlink" title="std::forwardÊÄªÁªì"></a>std::forwardÊÄªÁªì</h3><blockquote>
<p>‰∏çÈöæÁúãÂá∫forwardÂáΩÊï∞Ë∑ümoveÂáΩÊï∞ÁöÑÂ∑•‰ΩúÂéüÁêÜÈÉΩ‰∏ÄÊ†∑ÔºåÁî®ÁöÑÂºïÁî®ÊäòÂè†ÊäÄÊúØ„ÄÇ</p>
<ul>
<li>forwardÂ∞ÜgÂáΩÊï∞ÁöÑÂè≥ÂÄºÂºïÁî®Á±ªÂûãÂÆûÂèÇ‰ªéÂ∑¶ÂÄºËΩ¨Êç¢ÊàêÂè≥ÂÄºÔºå‰øùÊåÅrvalueËÉΩË¢´int&amp;&amp;Êé•Êî∂ÁöÑÊÄßË¥®ÔºàÂèØË∞ÉÁî®ÂØπË±°ÁöÑÂΩ¢ÂèÇÁ±ªÂûã‰∏∫int&amp;&amp;ÔºåÊé•ÂèóÂÆûÂèÇÂÄºÁöÑÁ±ªÂûã‰∏∫rvalueÔºâ„ÄÇ</li>
<li>ËÄågÂáΩÊï∞ÁöÑÂ∑¶ÂÄºÂºïÁî®Á±ªÂûãÂÆûÂèÇÔºåËøõÂÖ•forwardÊòØÂ∑¶ÂÄºÂºïÁî®ËøõÂÖ•ÔºåÂáΩÊï∞ËøîÂõû‰πüÊòØÂ∑¶ÂÄºÂºïÁî®‰º†Âá∫ÔºåÊ≤°ÂèòÂåñ„ÄÇ</li>
<li>ÊúÄÂêégÂáΩÊï∞ÁöÑÂΩ¢ÂèÇ‰∏∫intÁ±ªÂûãÊó∂ÔºåÊé•ÂèóÂÆûÂèÇÂÄºÁöÑÁ±ªÂûã‰∏∫lvalueÊàñrvalue„ÄÇforward‰∏çÁÆ°ÊÄé‰πàËΩ¨Êç¢ÔºåÂÆÉÈÉΩÂèØ‰ª•Êé•Âèó„ÄÇ</li>
</ul>
<p>ËøôÂ∞±ÊòØÊâÄË∞ìÁöÑÁ±ªÂûã‰øùÊåÅÔºàÂèØËÉΩÂèôËø∞ÁöÑ‰∏çÊòØÁâπÂà´ËØ¶ÁªÜÔºåÊØïÁ´üËøáÁ®ãÊúâÁÇπÂ§çÊùÇÔºåÂè™ÊòØËµ∑‰∏Ä‰∏™ÊäõÁ†ñÂºïÁéâÁöÑ‰ΩúÁî®ÔºåÂ§ßÂÆ∂ÂèØ‰ª•‰∏ãÂéªËá™Â∑±Êç£ÈºìÊç£ÈºìÔºâ„ÄÇ<br>.</p>
</blockquote>
<hr>
<h2 id="ÊúÄÂêéÂí±‰ª¨Êù•Áúã‰∏ãmoveÂíåforwordÁöÑ‰∏çÂêå‰πãÂ§Ñ„ÄÇ"><a href="#ÊúÄÂêéÂí±‰ª¨Êù•Áúã‰∏ãmoveÂíåforwordÁöÑ‰∏çÂêå‰πãÂ§Ñ„ÄÇ" class="headerlink" title="ÊúÄÂêéÂí±‰ª¨Êù•Áúã‰∏ãmoveÂíåforwordÁöÑ‰∏çÂêå‰πãÂ§Ñ„ÄÇ"></a>ÊúÄÂêéÂí±‰ª¨Êù•Áúã‰∏ãmoveÂíåforwordÁöÑ‰∏çÂêå‰πãÂ§Ñ„ÄÇ</h2><blockquote>
<p>std::moveÂáΩÊï∞ÁöÑÊ∫êÁ†ÅÔºö</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp">&gt;<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br>&gt;<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">typename</span> std::remove_reference&lt;T&gt;::type&amp;&amp;<br>&gt;<span class="hljs-built_in">move</span>(T&amp;&amp; t) <span class="hljs-keyword">noexcept</span><br>&gt;&#123; <br><span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">typename</span> std::remove_reference&lt;T&gt;::type&amp;&amp;&gt;(t); <br>&gt;&#125;<br></code></pre></td></tr></table></figure>
<p>std::forwardÂáΩÊï∞ÁöÑÊ∫êÁ†ÅÔºö</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp">&gt;<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt;<br>&gt;<span class="hljs-keyword">constexpr</span> _Tp&amp;&amp;<br>&gt;forward(<span class="hljs-keyword">typename</span> std::remove_reference&lt;_Tp&gt;::type&amp; <span class="hljs-type">_t</span>) <span class="hljs-keyword">noexcept</span><br>&gt;&#123; <br><span class="hljs-keyword">return</span> <span class="hljs-built_in">static_cast</span>&lt;_Tp&amp;&amp;&gt;(<span class="hljs-type">_t</span>); <br>&gt;&#125;<br></code></pre></td></tr></table></figure>
<p>‰∏çÈöæÂèëÁé∞ÔºåmoveÂáΩÊï∞ÁöÑ<code>std::remove_reference&lt;T&gt;::type</code>ÔºåÊîæÂú®ËøîÂõûÁ±ªÂûãÂíå<code>static_cast&lt;&gt;</code>‰∏≠ÔºåËÄå‰∏îÂêéÈù¢ÈÉΩÊòØÁõ¥Êé•Êé•‰∏ä‰∏§‰∏™<code>&amp;&amp;</code>„ÄÇ‰ªñËøôÊ†∑ÂÜôÁöÑÁõÆÁöÑÂú®‰∫éÔºå‰∏çÁÆ°<code>t</code>Êé•ÂèóÁöÑÊòØ‰∏Ä‰∏™Âè≥ÂÄºËøòÊòØ‰∏Ä‰∏™Â∑¶ÂÄºÔºåËøîÂõûÂá∫Êù•ÂÄºÁöÑÁ±ªÂûãÊ∞∏ËøúÈÉΩÊòØÂè≥ÂÄº„ÄÇÊ∞∏ËøúËÉΩË¢´<code>int&amp;&amp;</code>Êé•Âèó„ÄÇ<br>ËÄåforwardÂáΩÊï∞ÁöÑ<code>std::remove_reference&lt;T&gt;::type</code>ÔºåÊîæÂú®ÂΩ¢ÂèÇ<code>_t</code>‰∏äÔºåËÄå‰∏îËøîÂõûÁ±ªÂûãÂíå<code>static_cast&lt;&gt;</code>ÈÉΩÁî®‰∫ÜÂºïÁî®ÊäòÂè†ÊäÄÊúØÔºåÂÄºÂæóÊ≥®ÊÑèÁöÑ‰∏ÄÁÇπÊòØmoveÂáΩÊï∞‰∏çÈúÄË¶ÅÊòæÁ§∫ÊåáÂÆöÊ®°ÊùøÁöÑÁ±ªÂûãÔºåËÄåforwardÂáΩÊï∞ÈúÄË¶ÅÊòæÁ§∫ÊåáÂÆöÂÆûÂèÇÁ±ªÂûã„ÄÇforwardÂáΩÊï∞ÁöÑÂΩ¢ÂèÇ‰∏ÄÂÆöÊòØÂºïÁî®‰º†ÂÖ•ÔºåËÄå‰∏îËøîÂõûÁ±ªÂûãÂíå<code>static_cast&lt;&gt;</code>ÂèØ‰ª•Ê†πÊçÆÂÆûÂèÇÁ±ªÂûãÂä®ÊÄÅÊîπÂèò„ÄÇforwardÂáΩÊï∞ÁöÑÂÆûÂèÇÁ±ªÂûã‰∏∫<code>int&amp;&amp;</code>ÔºåÂàôËøîÂõûÁ±ªÂûã‰∏∫<code>int&amp;&amp;</code>ÔºåËøîÂõûÂá∫ÂéªÁöÑÂ∞±ÊòØ‰∏Ä‰∏™<code>xvalue</code>„ÄÇforwardÂáΩÊï∞ÁöÑÂÆûÂèÇÁ±ªÂûã‰∏∫<code>int&amp;</code>ÔºåÂàôËøîÂõûÁ±ªÂûã‰πü‰∏∫<code>int&amp;</code>ÔºåËøîÂõûÂá∫ÂéªÁöÑÂíå‰º†ÂÖ•ËøõÊù•ÁöÑÈÉΩÊòØÂÆûÂèÇÁöÑÂºïÁî®„ÄÇ</p>
</blockquote>
<hr>
<h1 id="ÈôÑ‰ª∂"><a href="#ÈôÑ‰ª∂" class="headerlink" title="ÈôÑ‰ª∂"></a>ÈôÑ‰ª∂</h1><blockquote>
<p>Ê≥®ÊÑèÔºö‰∏ãÈù¢ÁöÑÊñá‰ª∂‰∏ãËΩΩÈÉΩÊòØÂÖçË¥πÁöÑÔºå0ÁßØÂàÜ‰∏ãËΩΩÔºåÂà´Ë¢´VIPÂ≠óÊ†∑ÂêìÂà∞‰∫ÜËõ§ :D<br><a target="_blank" rel="noopener" href="https://download.csdn.net/download/Howl_1/77241824">Âè≥ÂÄºÂºïÁî®Áõ∏ÂÖ≥ÊñáÊ°£</a><br><a target="_blank" rel="noopener" href="https://download.csdn.net/download/Howl_1/77242257">ÊµãËØï‰ª£Á†ÅÁöÑÂèçÊ±áÁºñ‰ª£Á†Å</a></p>
</blockquote>
<h1 id="ÈôÑÂΩï"><a href="#ÈôÑÂΩï" class="headerlink" title="ÈôÑÂΩï"></a>ÈôÑÂΩï</h1><blockquote>
<p>ÊëòÂèñËá™„Ääc++ template 2nd„ÄãÈôÑÂΩï‰∏≠ÁöÑÂÜÖÂÆπÔºåÂèØ‰ª•Áî®Êù•Ê£ÄÊü•Ë°®ËææÂºèÁöÑÂÄºÁ±ªÂà´Ôºà value category of the expressionÔºöprvalueÔºåxvalueÊàñlvalueÔºâ„ÄÇ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">&gt;<span class="hljs-meta">#<span class="hljs-keyword">define</span> ISXVALUE(x) \</span><br><span class="hljs-meta">std::is_rvalue_reference<span class="hljs-string">&lt;decltype((x))&gt;</span>::value</span><br>&gt;<span class="hljs-meta">#<span class="hljs-keyword">define</span> ISLVALUE(x)	\</span><br><span class="hljs-meta">std::is_lvalue_reference<span class="hljs-string">&lt;decltype((x))&gt;</span>::value</span><br>&gt;<span class="hljs-meta">#<span class="hljs-keyword">define</span> CHEECK_VALUE_CATOGORIES(x) \</span><br><span class="hljs-meta"><span class="hljs-keyword">if</span>(ISXVALUE(x)) printf(<span class="hljs-string">&quot;%s is a xvalue\n&quot;</span>,#x);\</span><br><span class="hljs-meta"><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ISLVALUE(x)) printf(<span class="hljs-string">&quot;%s is a lvalue\n&quot;</span>,#x);\</span><br><span class="hljs-meta"><span class="hljs-keyword">else</span> printf(<span class="hljs-string">&quot;%s is a prvalue\n&quot;</span>,#x);</span><br></code></pre></td></tr></table></figure>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/C/" class="category-chain-item">C++</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Áî®ÂèçÊ±áÁºñÂàÜÊûêc++RVOÂºÄÂêØÂíåÂÖ≥Èó≠Êó∂ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰ª•ÂèäC++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜ</div>
      <div>https://howl144.github.io/2022/01/28/00004. Áî®ÂèçÊ±áÁºñÂàÜÊûêc++RVOÂºÄÂêØÂíåÂÖ≥Èó≠Êó∂ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰ª•ÂèäC++prvalueÔºåxvalueÂíålvalueÁöÑÁõ∏ÂÖ≥Áü•ËØÜ/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Deng Ye</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>January 28, 2022</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/02/09/00005.%20C++11,14,17%E4%B8%ADauto%E5%92%8Cdecltype%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E5%8F%8A%E6%8B%93%E5%B1%95/" title="C++11,14,17‰∏≠autoÂíådecltypeÁõ∏ÂÖ≥Áü•ËØÜÂèäÊãìÂ±ï">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">C++11,14,17‰∏≠autoÂíådecltypeÁõ∏ÂÖ≥Áü•ËØÜÂèäÊãìÂ±ï</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/07/25/00003.%20%E4%BD%BF%E7%94%A8tcpdump%E8%A7%82%E5%AF%9FTCP%E5%A4%B4%E9%83%A8%E4%BF%A1%E6%81%AF%EF%BC%88%E8%A1%A5%E5%85%85TCP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%EF%BC%89/" title="‰ΩøÁî®tcpdumpËßÇÂØüTCPÂ§¥ÈÉ®‰ø°ÊÅØÂíå‰∏âÊ¨°Êè°ÊâãÂõõÊ¨°Êå•Êâã">
                        <span class="hidden-mobile">‰ΩøÁî®tcpdumpËßÇÂØüTCPÂ§¥ÈÉ®‰ø°ÊÅØÂíå‰∏âÊ¨°Êè°ÊâãÂõõÊ¨°Êå•Êâã</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        Views: 
        <span id="leancloud-site-pv"></span>
        
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        Visitors: 
        <span id="leancloud-site-uv"></span>
        
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ‰∏ªÈ¢òÁöÑÂêØÂä®È°πÔºåÂ∞ÜÂÆÉ‰øùÊåÅÂú®ÊúÄÂ∫ïÈÉ® -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
